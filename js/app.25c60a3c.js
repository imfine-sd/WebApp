(function(t){function e(e){for(var a,o,r=e[0],c=e[1],l=e[2],u=0,f=[];u<r.length;u++)o=r[u],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&f.push(i[o][0]),i[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);d&&d(e);while(f.length)f.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],a=!0,o=1;o<n.length;o++){var c=n[o];0!==i[c]&&(a=!1)}a&&(s.splice(e--,1),t=r(r.s=n[0]))}return t}var a={},i={app:0},s=[];function o(t){return r.p+"js/"+({about:"about"}[t]||t)+"."+{about:"471741f2"}[t]+".js"}function r(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.e=function(t){var e=[],n=i[t];if(0!==n)if(n)e.push(n[2]);else{var a=new Promise((function(e,a){n=i[t]=[e,a]}));e.push(n[2]=a);var s,c=document.createElement("script");c.charset="utf-8",c.timeout=120,r.nc&&c.setAttribute("nonce",r.nc),c.src=o(t);var l=new Error;s=function(e){c.onerror=c.onload=null,clearTimeout(u);var n=i[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+a+": "+s+")",l.name="ChunkLoadError",l.type=a,l.request=s,n[1](l)}i[t]=void 0}};var u=setTimeout((function(){s({type:"timeout",target:c})}),12e4);c.onerror=c.onload=s,document.head.appendChild(c)}return Promise.all(e)},r.m=t,r.c=a,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/WebApp/",r.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var d=l;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var a=n("85ec"),i=n.n(a);i.a},"07a5":function(t,e,n){"use strict";var a=n("9619"),i=n.n(a);i.a},"19a2":function(t,e,n){},"252d":function(t,e,n){"use strict";var a=n("83ca"),i=n.n(a);i.a},"27bb":function(t,e,n){"use strict";var a=n("19a2"),i=n.n(a);i.a},2814:function(t,e,n){"use strict";var a=n("debf"),i=n.n(a);i.a},"30a7":function(t,e,n){"use strict";var a=n("86e1"),i=n.n(a);i.a},"3a62":function(t,e,n){"use strict";var a=n("5301"),i=n.n(a);i.a},4339:function(t,e,n){"use strict";var a=n("a4cc"),i=n.n(a);i.a},5284:function(t,e,n){},5301:function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("router-view")],1)},s=[],o=n("ade3"),r=n("5530"),c={},l="IMFINE_SD_STORAGE",u="STR_USER_NAME",d="STR_WEB_RTC_URL",f={STR_USER_NAME:u,STR_WEB_RTC_URL:d},m={STR_USER_NAME:"",STR_WEB_RTC_URL:"5f852799e11d1"};function h(){console.log("SD CONFIG START");var t=localStorage.getItem(l);c=JSON.parse(t)}function p(t,e){c=Object(r["a"])(Object(r["a"])({},c),{},Object(o["a"])({},t,e)),localStorage.setItem(l,JSON.stringify(c))}function v(t){var e=c;return e&&e[t]?e[t]:m[t]}var _={created:function(){h()}},g=_,b=(n("034f"),n("2877")),C=Object(b["a"])(g,i,s,!1,null,null,null),S=C.exports,E=n("9483");Object(E["a"])("".concat("/WebApp/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});n("d3b7");var y=n("8c4f"),w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-container",{attrs:{fluid:""}},[n("h1",[t._v("CMS")]),n("v-row",[n("v-col",{attrs:{cols:"2"}},[n("v-subheader",[t._v("HLS URL :")])],1),n("v-col",{attrs:{cols:"8"}},[n("v-text-field",{attrs:{label:"URL"},model:{value:t.hls_url,callback:function(e){t.hls_url=e},expression:"hls_url"}})],1),n("v-col",{attrs:{cols:"2"}},[n("v-btn",{attrs:{icon:"",outlined:""},on:{click:t.updateHlsUrl}},[n("v-icon",[t._v("mdi-pencil")])],1),n("v-btn",{staticClass:"ml-4",attrs:{icon:"",outlined:""},on:{click:t.updateMessages}},[n("v-icon",[t._v("mdi-refresh")])],1)],1)],1),n("v-row",[n("v-col",[n("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.computed_messages,"items-per-page":20,"sort-by":["time"],"sort-desc":[!0]}})],1)],1)],1)],1)},T=[],O=(n("4160"),n("159b"),n("2f62")),R=n("59ca"),j=(n("66ce"),{apiKey:"AIzaSyBtnFzSNMp30pWM2CNva-U9ZM1sdE8lzts",authDomain:"fir-ca8ad.firebaseapp.com",databaseURL:"https://fir-ca8ad.firebaseio.com",projectId:"fir-ca8ad",storageBucket:"fir-ca8ad.appspot.com",messagingSenderId:"371247898053",appId:"1:371247898053:web:a657c9fb4898a89947bfac",measurementId:"G-BWCDY22QJR"});function x(){return R["database"]().ref("/messages").orderByChild("time").once("value")}function A(t){return R["database"]().ref("/messages").orderByChild("time").limitToLast(t).once("value")}function I(t){return R["database"]().ref("/messages").orderByChild("time").startAt(t+1).once("value")}function D(t,e){var n=R["database"]().ref("/"+t).child("data").push().key,a="/"+n,i={};return i[t+"/"+a]=Object(r["a"])({},e),R["database"]().ref().update(i,(function(t){return t}))}function k(){return R["database"]().ref("/").once("value").then((function(t){var e=t.val()&&t.val().hls_url||"";return e}))}function N(t,e){var n={};return n[t]=e,R["database"]().ref().update(n,(function(t){return t}))}R["initializeApp"](j);var L={data:function(){return{hls_url:"",computed_messages:[],headers:[{text:"Time",align:"end",sortable:!0,value:"date",width:250},{text:"Type",value:"type",sortable:!1,width:120},{text:"User",value:"user",sortable:!1,width:120},{text:"Message",value:"message",sortable:!1}]}},computed:Object(r["a"])({},Object(O["c"])(["getHlsUrl"])),created:function(){var t=this;this.LOAD_HLS_URL().then((function(){t.hls_url=t.getHlsUrl})),this.updateMessages()},methods:Object(r["a"])(Object(r["a"])({},Object(O["b"])(["LOAD_HLS_URL"])),{},{updateHlsUrl:function(){N("hls_url",this.hls_url)},updateMessages:function(){var t=this;this.computed_messages=[],x().then((function(e){e.forEach((function(e){var n=e.val(),a=new Date(n.time).toLocaleString("ko-KR"),i=Object(r["a"])(Object(r["a"])({},n),{},{date:a});t.computed_messages.push(i)}))}))}})},M=L,P=n("6544"),U=n.n(P),$=n("8336"),H=n("62ad"),V=n("a523"),B=n("8fea"),G=n("132d"),W=n("0fd9"),z=n("e0c7"),J=n("8654"),F=Object(b["a"])(M,w,T,!1,null,"78c48521",null),Y=F.exports;U()(F,{VBtn:$["a"],VCol:H["a"],VContainer:V["a"],VDataTable:B["a"],VIcon:G["a"],VRow:W["a"],VSubheader:z["a"],VTextField:J["a"]});var q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"contents_area",style:t.contents_style,attrs:{id:"root"}},[n("div",{staticClass:"count"},[t._v(t._s(t.h_count))]),t._l(t.obj,(function(e,a){return n(e.component,{key:a,ref:a,refInFor:!0,tag:"component",staticClass:"user_none",attrs:{props_data:e.emoji},on:{end_anim:t.deleteItem}})})),n("VideoView"),n("MenuBar",{staticClass:"menu"}),n("Tabs",{staticClass:"item"})],2)},K=[],Q=(n("25f0"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"area",style:{height:t.v_heith}},[n("v-tabs",{staticClass:"tab_menu",attrs:{"background-color":"primary",dark:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},t._l(this.tabs,(function(e){return n("v-tab",{key:e.tab},[t._v(" "+t._s(e)+" ")])})),1),n("v-tabs-items",{attrs:{id:"tab_contents"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},t._l(this.tabs,(function(e){return n("v-tab-item",{key:e},[n("div",{staticClass:"tabs",style:{height:t.height}},[n("HLS"===e?"HLSVideo":"WebRTC")],1)])})),1)],1)}),Z=[],X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("video",{staticClass:"video-js vjs-default-skin vjs-16-9",attrs:{id:"hls-example",controls:""}},[n("source",{ref:"video_source",attrs:{type:"application/x-mpegURL"}})])])},tt=[],et={data:function(){return{window_width:100,window_height:50}},computed:Object(r["a"])({},Object(O["c"])(["getHlsUrl"])),props:["props_tab"],created:function(){var t=this;this.$store.dispatch("LOAD_HLS_URL").then((function(){t.$refs.video_source.setAttribute("src",t.getHlsUrl),window.videojs("hls-example")}))},methods:{playVideo:function(){}}},nt=et,at=(n("6be5"),Object(b["a"])(nt,X,tt,!1,null,null,null)),it=at.exports,st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"root",style:{height:t.v_heith}},[a("video",{attrs:{type:"module",src:n("70ef")}})])},ot=[],rt={data:function(){return{v_heith:"0px"}},created:function(){var t=9*window.innerWidth/16;this.v_heith=t+"px"}},ct=rt,lt=(n("a273"),Object(b["a"])(ct,st,ot,!1,null,"78424b34",null)),ut=lt.exports,dt={data:function(){return{tabs:["HLS","WEBRTC"],height:"0px",v_heith:"0px",tab:0}},computed:Object(r["a"])({},Object(O["e"])(["tab_items"])),components:{HLSVideo:it,WebRTC:ut},props:["props_tab"],created:function(){var t=this;this.$nextTick((function(){var e=9*window.innerWidth/16;t.v_heith=e+"px";var n=t.$refs.area.getBoundingClientRect().height;t.height=n+"px",t.SET_TAB_CONTENS_HEIGHT(n)}))},watch:{tab:function(){}},methods:Object(r["a"])({},Object(O["d"])(["SET_TAB_CONTENS_HEIGHT"]))},ft=dt,mt=(n("252d"),n("71a3")),ht=n("c671"),pt=n("fe57"),vt=n("aac8"),_t=Object(b["a"])(ft,Q,Z,!1,null,"f3f7c152",null),gt=_t.exports;U()(_t,{VTab:mt["a"],VTabItem:ht["a"],VTabs:pt["a"],VTabsItems:vt["a"]});var bt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"shadow"},[n("p",{staticClass:"font"},[t._v("I M FINE Web App")]),n("tab-indicator")],1)])},Ct=[],St=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"indicator_bg"},t._l(this.tab_items.length,(function(e){return n("div",{key:e.index},[n("span",{staticClass:"dot",class:t.getDotClass(e)})])})),0)},Et=[],yt=new a["a"],wt={data:function(){return{selected_index:0}},computed:Object(r["a"])({},Object(O["e"])(["tab_items"])),created:function(){var t=this;yt.$on("selectTab",(function(e){t.selected_index=e}))},methods:{getDotClass:function(t){return t-1===this.selected_index?"selected":"unselected"}}},Tt=wt,Ot=(n("c07e"),Object(b["a"])(Tt,St,Et,!1,null,"3e5e1a52",null)),Rt=Ot.exports,jt={components:{TabIndicator:Rt}},xt=jt,At=(n("27bb"),Object(b["a"])(xt,bt,Ct,!1,null,"385b4c26",null)),It=At.exports,Dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"area"},[n("v-tabs",{staticClass:"tab_menu",attrs:{"background-color":"primary",dark:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},t._l(this.tab_items,(function(e){return n("v-tab",{key:e.tab},[t._v(" "+t._s(e)+" ")])})),1),n("v-tabs-items",{attrs:{id:"tab_contents"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},t._l(this.tab_items,(function(e){return n("v-tab-item",{key:e},[n("div",{staticClass:"tabs",style:{height:t.height}},["Chatting"===e?n("Chatting"):"Emoji"===e?n("Emoji"):"Info"===e?n("Info"):t._e(),n("div")],1)])})),1)],1)},kt=[],Nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"bg",staticClass:"root"},[n("div",{staticClass:"title"},[t._v("User Name")]),n("form",{staticClass:"horizontal_line"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.user_name,expression:"user_name"}],staticClass:"edit",staticStyle:{flex:"7"},attrs:{type:"text"},domProps:{value:t.user_name},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.applyName(e)},input:function(e){e.target.composing||(t.user_name=e.target.value)}}}),n("div",{staticClass:"divider",staticStyle:{flex:"1"}},[t._v(":")]),n("v-btn",{staticStyle:{flex:"2"},on:{click:t.applyName}},[t._v("APPLY")])],1),n("div",{staticClass:"title"},[t._v("Web RTC")]),n("div",{staticClass:"horizontal_line"},[n("div",{staticClass:"left_option"},[t._v("Signaling URL")]),n("div",{staticClass:"divider",staticStyle:{flex:"0.1"}},[t._v(":")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.web_signaliing_url,expression:"web_signaliing_url"}],staticClass:"edit right_option",attrs:{type:"text"},domProps:{value:t.web_signaliing_url},on:{input:function(e){e.target.composing||(t.web_signaliing_url=e.target.value)}}})]),t._m(0),n("div",{staticClass:"title"},[t._v("Sender")]),t._m(1),t._m(2),t._m(3),t._m(4),t._m(5),t._m(6),n("div",{staticClass:"title"},[t._v("Receiver")]),t._m(7),n("div",{staticClass:"horizontal_line"},[n("v-btn",{staticStyle:{flex:"1","margin-top":"20px"},on:{click:t.applyWebRTC}},[t._v("APPLY")])],1),n("div",{staticStyle:{width:"100%",height:"40px"}})])},Lt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"horizontal_line"},[n("div",{staticClass:"left_option"},[t._v("Video Camera")]),n("div",{staticClass:"divider",staticStyle:{flex:"0.1"}},[t._v(":")]),n("input",{staticClass:"edit right_option",attrs:{type:"text"}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"horizontal_line"},[n("div",{staticClass:"left_option"},[t._v("Stream Name")]),n("div",{staticClass:"divider",staticStyle:{flex:"0.1"}},[t._v(":")]),n("input",{staticClass:"edit right_option",attrs:{type:"text"}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"horizontal_line"},[n("div",{staticClass:"left_option"},[t._v("Video Bitrate")]),n("div",{staticClass:"divider",staticStyle:{flex:"0.1"}},[t._v(":")]),n("input",{staticClass:"edit right_option",attrs:{type:"text"}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"horizontal_line"},[n("div",{staticClass:"left_option"},[t._v("Video Codect")]),n("div",{staticClass:"divider",staticStyle:{flex:"0.1"}},[t._v(":")]),n("input",{staticClass:"edit right_option",attrs:{type:"text"}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"horizontal_line"},[n("div",{staticClass:"left_option"},[t._v("Video Bitrate")]),n("div",{staticClass:"divider",staticStyle:{flex:"0.1"}},[t._v(":")]),n("input",{staticClass:"edit right_option",attrs:{type:"text"}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"horizontal_line"},[n("div",{staticClass:"left_option"},[t._v("Frame Size")]),n("div",{staticClass:"divider",staticStyle:{flex:"0.1"}},[t._v(":")]),n("input",{staticClass:"edit right_option",attrs:{type:"text"}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"horizontal_line"},[n("div",{staticClass:"left_option"},[t._v("Frame Rate")]),n("div",{staticClass:"divider",staticStyle:{flex:"0.1"}},[t._v(":")]),n("input",{staticClass:"edit right_option",attrs:{type:"text"}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"horizontal_line"},[n("div",{staticClass:"left_option"},[t._v("Stream Name")]),n("div",{staticClass:"divider",staticStyle:{flex:"0.1"}},[t._v(":")]),n("input",{staticClass:"edit right_option",attrs:{type:"text"}})])}],Mt={data:function(){return{user_name:"",web_signaliing_url:""}},computed:Object(r["a"])({},Object(O["e"])(["tab_contents_height"])),created:function(){var t=this;this.$nextTick((function(){t.$refs.bg.style.height=t.tab_contents_height+"px",console.log(t.tab_contents_height)})),this.loadInfo()},methods:Object(r["a"])(Object(r["a"])({},Object(O["d"])(["SET_NAME"])),{},{applyName:function(){p(f.STR_USER_NAME,this.user_name),this.SET_NAME(this.user_name)},applyWebRTC:function(){p(f.STR_WEB_RTC_URL,this.web_signaliing_url)},loadInfo:function(){this.user_name=v(f.STR_USER_NAME),this.web_signaliing_url=v(f.STR_WEB_RTC_URL)}})},Pt=Mt,Ut=(n("2814"),Object(b["a"])(Pt,Nt,Lt,!1,null,"47ceedee",null)),$t=Ut.exports;U()(Ut,{VBtn:$["a"]});var Ht=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"bg"},[n("div",{ref:"items",staticClass:"itmes"},[n("div",{ref:"glist",staticClass:"grid"},[n("v-row",t._l(t.emoji_list,(function(e){return n("v-col",{key:e,attrs:{cols:"4"}},[n("v-img",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"shadow",attrs:{"aspect-ratio":"1"},on:{click:function(n){return t.addHeart(e)}}},[n("div",{staticClass:"font"},[t._v(t._s(e))])])],1)})),1)],1)])])},Vt=[],Bt={data:function(){return{imgs:[],timer:null}},computed:Object(r["a"])({},Object(O["e"])(["tab_contents_height","emoji_list"])),created:function(){var t=this;this.$nextTick((function(){t.$refs.bg.style.height=t.tab_contents_height+"px",t.$refs.items.style.height=t.tab_contents_height+"px";var e=t.$refs.glist,n=window.innerHeight-e.getBoundingClientRect().y;e.style.height=n+"px",console.log(t.tab_contents_height)}))},methods:Object(r["a"])(Object(r["a"])({},Object(O["b"])(["ADD_EMOJI"])),{},{addHeart:function(t){this.ADD_EMOJI(t)}})},Gt=Bt,Wt=(n("ebed"),n("adda")),zt=n("269a"),Jt=n.n(zt),Ft=n("5607"),Yt=Object(b["a"])(Gt,Ht,Vt,!1,null,"5272ae9e",null),qt=Yt.exports;U()(Yt,{VCol:H["a"],VImg:Wt["a"],VRow:W["a"]}),Jt()(Yt,{Ripple:Ft["a"]});var Kt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"bg",staticClass:"tab_bg"},[n("ChattingList",{staticClass:"list"}),n("div",{staticClass:"shadow_up"}),n("ChattingInput",{staticClass:"input"})],1)},Qt=[],Zt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"outline"},[n("form",{staticClass:"form"},[n("input",{staticClass:"text_input",attrs:{type:"text"},domProps:{value:t.input_data},on:{input:t.updataInput,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendMessage(e)}}})]),n("v-btn",{ref:"btn",class:{send_btn:1==this.isEdit,wait_btn:0==this.isEdit},style:1==this.isEdit&&{color:"white"},attrs:{icon:""},on:{click:t.sendMessage}},[n("v-icon",[t._v("mdi-arrow-up")])],1)],1)},Xt=[],te={data:function(){return{input_data:"",isEdit:!1}},methods:{sendMessage:function(){var t=this;if(this.input_data){var e=this.input_data;this.$store.dispatch("SEND_MESSAGE",e).then((function(e){console.log("RR = ",e),e||(t.input_data="",t.isEdit=!1,yt.$emit("updateList"))}))}},getBtnClass:function(){return 1==this.$refs.input.value?"send_btn":"wait_btn"},updataInput:function(t){this.input_data=t.target.value,this.isEdit=this.input_data.length>0}}},ee=te,ne=(n("3a62"),Object(b["a"])(ee,Zt,Xt,!1,null,"29fe691e",null)),ae=ne.exports;U()(ne,{VBtn:$["a"],VIcon:G["a"]});var ie=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("ul",{ref:"rlist",staticClass:"chatting_list"},t._l(t.getMessages,(function(e){return n("li",{key:e.index},[n("div",{class:!!e.isMine&&t.msg_right},[n("div",{staticClass:"msg_item",class:e.isMine?t.msg_mine:t.msg_other},[n("div",{staticClass:"msg_top"},[n("div",{staticClass:"msg_user"},[t._v(" "+t._s(e.user)+" ")]),n("div",{staticClass:"msg_time"},[t._v(" "+t._s(t.getFormatDate(e.time))+" ")])]),n("div",{staticClass:"msg_contents"},[t._v(" "+t._s(e.message)+" ")])])])])})),0)])},se=[],oe={data:function(){return{msg_right:"msg_right",msg_mine:"msg_mine",msg_other:"msg_other"}},computed:Object(r["a"])({},Object(O["c"])(["getMessages"])),created:function(){var t=this;yt.$on("updateList",(function(){t.scrollToBottom()})),this.$nextTick((function(){var e=t.$refs.rlist,n=window.innerHeight-e.getBoundingClientRect().y-50;e.style.height=n+"px"}))},mounted:function(){this.scrollToBottom()},watch:{getMessages:function(){console.log("add item"),this.$nextTick((function(){this.scrollToBottom()}))}},methods:{getFormatDate:function(t){var e=new Date(t);return e.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})},scrollToBottom:function(){var t=this.$refs.rlist;t.scrollTop=t.scrollHeight}}},re=oe,ce=(n("30a7"),Object(b["a"])(re,ie,se,!1,null,"425f4460",null)),le=ce.exports,ue={computed:Object(r["a"])({},Object(O["e"])(["tab_contents_height"])),components:{ChattingInput:ae,ChattingList:le},created:function(){var t=this;this.$nextTick((function(){t.$refs.bg.style.height=t.tab_contents_height+"px"}))}},de=ue,fe=(n("72c5"),Object(b["a"])(de,Kt,Qt,!1,null,"03f4e258",null)),me=fe.exports,he={data:function(){return{height:"0px",tab:0}},computed:Object(r["a"])({},Object(O["e"])(["tab_items"])),components:{Info:$t,Chatting:me,Emoji:qt},created:function(){var t=this;this.$nextTick((function(){var e=t.$refs.area.getBoundingClientRect().height;t.height=e+"px",t.SET_TAB_CONTENS_HEIGHT(e)}))},watch:{tab:function(){yt.$emit("selectTab",this.tab),console.log("Tab Chaged",this.tab)}},methods:Object(r["a"])({},Object(O["d"])(["SET_TAB_CONTENS_HEIGHT"]))},pe=he,ve=(n("07a5"),Object(b["a"])(pe,Dt,kt,!1,null,"5714b21f",null)),_e=ve.exports;U()(ve,{VTab:mt["a"],VTabItem:ht["a"],VTabs:pt["a"],VTabsItems:vt["a"]});var ge=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"root"},[n("div",{staticClass:"icon",class:{anim:this.isAnim},style:{left:t.getLeft,transition:"all "+t.getDuration+"s linear"},attrs:{id:"hid"}},[t._v(" "+t._s(t.props_data)+" ")])])},be=[],Ce={data:function(){return{isAnim:!1,getLeft:"0px",getDuration:0}},props:["props_data"],mounted:function(){var t=this,e=.8,n=3,a=this.getRandom(e,n);this.getDuration=a;var i=Math.floor(this.getRandom(50,window.innerWidth-50))+"px";this.getLeft=i;var s=setTimeout((function(){clearTimeout(s),t.$emit("end_anim",t.$vnode.data.ref)}),1e3*a),o=setTimeout((function(){t.isAnim=!0,clearTimeout(o)}),10)},methods:{getRandom:function(t,e){return Math.random()*(e-t)+t}}},Se=Ce,Ee=(n("d242"),Object(b["a"])(Se,ge,be,!1,null,"44cfd3a8",null)),ye=Ee.exports,we={name:"App",components:{VideoView:gt,MenuBar:It,Tabs:_e,EmojiIcon:ye},data:function(){return{h_count:0,obj:{},contents_style:{height:document.documentElement.clientHeight+"px"}}},created:function(){var t=this;yt.$on("RECIEVE_DATA",(function(e){t.obj["idx"+t.h_count]={component:ye,emoji:e.message},t.h_count++})),this.loadName(),this.loadMessage()},beforeDestroy:function(){this.DELETE_MESSAGE_EVENT()},methods:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(O["d"])(["SET_NAME","DELETE_MESSAGE_EVENT"])),Object(O["b"])(["LOAD_MESSAGES","SET_MESSAGE_EVENT"])),{},{getEmoji:function(t){this.emoji_list[t]},deleteItem:function(t){this.$delete(this.obj,t)},loadName:function(){var t=v(f.STR_USER_NAME);0==t.length&&(t=Math.random().toString(36).substring(7)),this.SET_NAME(t)},loadMessage:function(){var t=this;this.LOAD_MESSAGES().then((function(){console.log("load all messsage"),t.SET_MESSAGE_EVENT()}))}})},Te=we,Oe=(n("4339"),Object(b["a"])(Te,q,K,!1,null,"972f3e5e",null)),Re=Oe.exports;a["a"].use(y["a"]);var je=[{path:"/",redirect:"/client"},{path:"/client",name:"Client",component:Re},{path:"/cms",name:"CMS",component:Y},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}}],xe=new y["a"]({routes:je}),Ae=xe,Ie=(n("99af"),n("c975"),n("96cf"),n("1da1"));a["a"].use(O["a"]);var De,ke=100,Ne=new O["a"].Store({state:{dic_list:[],tab_items:["Info","Chatting","Emoji"],hrl_url:"",last_timestamp:0,messages:[],user_name:"",emoji_list:["ðŸ˜","ðŸ¥³","âœŒðŸ»","ðŸ˜º","ðŸ¤¡","ðŸ‘ðŸ»","ðŸ’‹","â­ï¸","ðŸŒ¹"],tab_contents_height:0},getters:{getMessages:function(t){return t.messages},getHlsUrl:function(t){return t.hrl_url}},mutations:{SET_TAB_CONTENS_HEIGHT:function(t,e){t.tab_contents_height=e},ADD_MESSAGES:function(t,e){t.messages.length>=ke&&t.messages.shift(),t.messages=t.messages.concat(e)},SET_NAME:function(t,e){t.user_name=e},SET_HLS_URL:function(t,e){t.hrl_url=e},DELETE_MESSAGE_EVENT:function(){clearTimeout(De),De=null}},actions:{LOAD_MESSAGES:function(t){var e=t.state,n=t.commit;return A(ke).then((function(t){var a=[];return t.forEach((function(t){e.dic_list.push(t.key);var n=t.val();e.last_timestamp=n.time;var i=n.type||"MESSAGE";if("MESSAGE"===i){s&&(n.isMine=!0),n.index=t.key;var s=n.user===e.user_name;a.push(n)}})),n("ADD_MESSAGES",a),t}))},SET_MESSAGE_EVENT:function(t){var e=t.state,n=t.commit;De=setInterval(Object(Ie["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:I(e.last_timestamp).then((function(t){var a=null,i=[];t.forEach((function(t){var n=t.val();a=n;var s=-1!=e.dic_list.indexOf(t.key);if(!s){var o=n.type||"MESSAGE";if("MESSAGE"===o){n.index=t.key;var r=n.user===e.user_name;r||i.push(t.val())}else yt.$emit("RECIEVE_DATA",t.val());e.dic_list.push(t.key)}})),i.length>0&&(n("ADD_MESSAGES",i),1==a&&(e.last_timestamp=a.time))}));case 1:case"end":return t.stop()}}),t)}))),1e3)},SEND_MESSAGE:function(t,e){var n=t.commit,a=t.state,i={type:"MESSAGE",user:a.user_name,time:(new Date).getTime(),message:e};D("messages",i).then((function(t){return console.log("SEND_RESULT",t),t||n("ADD_MESSAGES",Object(r["a"])(Object(r["a"])({},i),{},{isMine:!0})),t}))},LOAD_HLS_URL:function(t){return Object(Ie["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,k();case 3:a=e.sent,n("SET_HLS_URL",a);case 5:case"end":return e.stop()}}),e)})))()},ADD_EMOJI:function(t,e){var n=t.state,a={type:"EMOJI",user:n.user_name,time:(new Date).getTime(),message:e};D("messages",a).then((function(t){return console.log("SEND_EMOJI_RESULT",t),t}))}},modules:{}}),Le=n("f309");a["a"].use(Le["a"]);var Me=new Le["a"]({});a["a"].config.productionTip=!1,new a["a"]({router:Ae,store:Ne,vuetify:Me,render:function(t){return t(S)}}).$mount("#app")},6973:function(t,e,n){},"6be5":function(t,e,n){"use strict";var a=n("d229"),i=n.n(a);i.a},"70ef":function(t,e,n){"use strict";n.r(e);n("fb6a"),n("d3b7"),n("498a");var a=n("53ca"),i=n("5530");n("caad"),n("c975"),n("a9e3"),n("4d63"),n("ac1f"),n("25f0"),n("2532"),n("466d"),n("5319"),n("1276"),n("2ca0"),window.adapter.browserDetails;function s(t){var e=t.split(/\r\n/),n="";for(var a in e){var i=e[a];if(0!=i.length){if(i.includes("profile-level-id")){var s=i.substr(i.indexOf("profile-level-id")+17,6),o=Number("0x"+s.substr(0,2)),r=Number("0x"+s.substr(2,2)),c=Number("0x"+s.substr(4,2));o>66&&(o=66,r=224,c=31);var l=("00"+o.toString(16)).slice(-2).toLowerCase()+("00"+r.toString(16)).slice(-2).toLowerCase()+("00"+c.toString(16)).slice(-2).toLowerCase();i=i.replace(s,l)}n+=i,n+="\r\n"}}return n}n("3ca3"),n("ddb0"),n("2b3d");var o=n("d4ec"),r=n("bee2"),c=function(){function t(e){Object(o["a"])(this,t),this.mungeSDP=void 0,this.onconnectionstatechange=void 0,this.onstop=void 0,this.onerror=void 0,this.videoElement=void 0,this.sdpURL="",this.repeaterRetryCount=0,this.streamInfo=void 0,this.userData=void 0,this.wsConnection=void 0,this.peerConnection=void 0,this.peerConnectionConfig={iceServers:[]},this.gotIceCandidate=this.gotIceCandidate.bind(this),this.gotDescription=this.gotDescription.bind(this),this.gotRemoteTrack=this.gotRemoteTrack.bind(this),this.doGetAvailableStreams=!1,this.getAvailableStreamsResolve=void 0,this.getAvailableStreamsReject=void 0,e&&this.set(e)}return Object(r["a"])(t,[{key:"set",value:function(t){null!=t.sdpURL&&(this.sdpURL=t.sdpURL),null!=t.videoElement&&(this.videoElement=t.videoElement),null!=t.streamInfo&&(this.streamInfo=t.streamInfo),null!=t.userData&&(this.userData=t.userData),null!=t.mungeSDP&&(this.mungeSDP=t.mungeSDP),null!=t.onconnectionstatechange&&(this.onconnectionstatechange=t.onconnectionstatechange),null!=t.onstop&&(this.onstop=t.onstop),null!=t.onerror&&(this.onerror=t.onerror)}},{key:"gotIceCandidate",value:function(t){t.candidate}},{key:"gotDescription",value:function(t){var e=this;console.log("WowzaPeerConnectionPlay.gotDescription"),this.peerConnection.setLocalDescription(t).then((function(){console.log("sendAnswer"),e.wsConnection.send('{"direction":"play", "command":"sendResponse", "streamInfo":'+JSON.stringify(e.streamInfo)+', "sdp":'+JSON.stringify(t)+', "userData":'+JSON.stringify(e.userData)+"}")})).catch((function(t){return console.log("set description error",t)}))}},{key:"gotRemoteTrack",value:function(t){console.log("WowzaPeerConnectionPlay.gotRemoteTrack: kind:"+t.track.kind+" stream:"+t.streams[0]);try{this.videoElement.srcObject=t.streams[0]}catch(e){this.videoElement.src=window.URL.createObjectURL(t.streams[0])}}},{key:"wsConnect",value:function(t){var e=this;console.log("WowzaPeerConnectionPlaywsConnect: "+t);try{this.wsConnection=new WebSocket(t)}catch(i){return void this.errorHandler(i)}function n(){console.log("sendPlayGetOffer: "+JSON.stringify(e.streamInfo)),e.wsConnection.send('{"direction":"play", "command":"getOffer", "streamInfo":'+JSON.stringify(e.streamInfo)+', "userData":'+JSON.stringify(e.userData)+"}")}function a(){console.log("sendPlayGetAvailableStreams: "+JSON.stringify(e.streamInfo)),e.wsConnection.send('{"direction":"play", "command":"getAvailableStreams", "streamInfo":'+JSON.stringify(e.streamInfo)+', "userData":'+JSON.stringify(e.userData)+"}")}this.wsConnection.binaryType="arraybuffer",this.wsConnection.onopen=function(){console.log("WowzaPeerConnectionPlay.onopen"),e.peerConnection=new RTCPeerConnection(e.peerConnectionConfig),e.peerConnection.onicecandidate=e.gotIceCandidate,e.peerConnection.ontrack=e.gotRemoteTrack,e.peerConnection.onconnectionstatechange=function(t){null!=e.onconnectionstatechange&&e.onconnectionstatechange(t)},e.doGetAvailableStreams?a():n()},this.wsConnection.onmessage=function(t){console.log("wsConnection.onmessage: "+t.data);var a=JSON.parse(t.data),i=Number(a["status"]),s=a["command"];if(514==i)e.repeaterRetryCount++,e.repeaterRetryCount<10?setTimeout(n,500):(e.errorHandler({message:"Live stream repeater timeout: "+streamName}),e.stop());else if(200!=i)e.errorHandler({message:a["statusDescription"]}),_stop();else{var o=a["streamInfo"];void 0!==o&&(e.streamInfo.sessionId=o.sessionId);var r=a["sdp"];null!=r&&(console.log("sdp: "+JSON.stringify(a["sdp"])),null!=e.mungeSDP&&(a.sdp.sdp=e.mungeSDP(a.sdp.sdp)),console.log("SDP Data: "+a.sdp.sdp),e.peerConnection.setRemoteDescription(new RTCSessionDescription(a.sdp)).then((function(){return e.peerConnection.createAnswer().then((function(t){return e.gotDescription(t)})).catch((function(t){return e.errorHandler(t)}))})).catch((function(t){return e.errorHandler(t)})));var c=a["iceCandidates"];if(null!=c)for(var l in c)console.log("iceCandidates: "+JSON.stringify(c[l])),e.peerConnection.addIceCandidate(new RTCIceCandidate(c[l]))}0=="sendResponse".localeCompare(s)&&(null!=e.wsConnection&&e.wsConnection.close(),e.wsConnection=null),0=="getAvailableStreams".localeCompare(s)&&(e.stop(),e.getAvailableStreamsResolve(a))},this.wsConnection.onclose=function(){console.log("wsConnection.onclose")},this.wsConnection.onerror=function(t){e.errorHandler(t)}}},{key:"start",value:function(){this.repeaterRetryCount=0,this.doGetAvailableStreams=!1,null==this.peerConnection?(console.log("WowzaPeerConnectionPlay.start: sdpURL:"+this.sdpURL+" streamInfo:"+JSON.stringify(this.streamInfo)),this.wsConnect(this.sdpURL)):console.log("WowzaPeerConnectionPlay.start: peerConnection already in use, not starting")}},{key:"stop",value:function(){null!=this.peerConnection&&this.peerConnection.close(),this.peerConnection=null,null!=this.wsConnection&&this.wsConnection.close(),this.wsConnection=null,this.videoElement.src="",null!=this.onstop&&this.onstop()}},{key:"getAvailableStreams",value:function(){var t=this;return new Promise((function(e,n){t.getAvailableStreamsResolve=e,t.getAvailableStreamsReject=n,t.doGetAvailableStreams=!0,null==t.peerConnection?t.wsConnect(t.sdpURL):n({message:"WowzaPeerConnectionPlay.getAvailableStreams: peerConnection already in use"})}))}},{key:"errorHandler",value:function(t){null!=this.onerror&&this.onerror(t)}}]),t}(),l=c,u={connectionState:"stopped",videoElementPlay:void 0,sdpURL:"",streamInfo:{applicationName:"",streamName:"",sessionId:"[empty]"},userData:{param1:"value1"}},d=void 0,f={},m=function(t){return new Promise((function(e,n){u=Object(i["a"])(Object(i["a"])({},u),t),null!=f.onStateChanged&&f.onStateChanged(u),e(u)}))},h=function(){return u},p=function(t){null!=t.target&&null!=t.target.connectionState&&m({connectionState:t.target.connectionState})},v=function(){m({connectionState:"stopped"})},_=function(t){f=t},g=function(t){return new Promise((function(e,n){var a=h(),s=Object(i["a"])({},a.streamInfo),o={};null!=t.videoElementPlay&&(o["videoElementPlay"]=t.videoElementPlay),null!=t.sdpURL&&(o["sdpURL"]=t.sdpURL.trim()),null!=t.applicationName&&(s["applicationName"]=t.applicationName.trim()),null!=t.streamName&&(s["streamName"]=t.streamName.trim()),null!=t.sessionId&&(s["sessionId"]=t.sessionId),null!=t.streamInfo&&(s=Object(i["a"])(Object(i["a"])({},s),t.streamInfo)),o["streamInfo"]=s,null!=t.userData&&(o["userData"]=Object(i["a"])({},t.userData)),m(o).then((function(t){e(t)}))}))},b=function(){var t=h();return d=new l({sdpURL:t.sdpURL,videoElement:t.videoElementPlay,streamInfo:t.streamInfo,userData:t.userData,mungeSDP:s,onconnectionstatechange:p,onstop:v,onerror:E}),d.getAvailableStreams()},C=function(){var t=h();d=new l({sdpURL:t.sdpURL,videoElement:t.videoElementPlay,streamInfo:t.streamInfo,userData:t.userData,mungeSDP:s,onconnectionstatechange:p,onstop:v,onerror:E}),d.start()},S=function(){d.stop(),d=void 0},E=function(t){console.log("WowzaWebRTCPlay ERROR:"),console.log(t),null==t.message&&null!=t.target&&console.log("typeof error.target: "+Object(a["a"])(t.target));Object(i["a"])({},t);null!=f.onError&&f.onError(t)},y={on:_,set:g,getState:h,getAvailableStreams:b,play:C,stop:S},w=y;window.WowzaWebRTCPlay=w;var T={settings:{playApplicationName:"live",playSdpURL:"wss://5f852799e11d1.streamlock.net/webrtc-session.json",playStreamName:"hello"}},O="play",R=function(t,e,n){w.on({onError:t,onStateChanged:function(t){"connected"===t.connectionState?e():n()}}),w.set({videoElementPlay:document.getElementById("player-video")})},j=function(t){x(t).then((function(){w.play()}))},x=function(t){T.settings=t;var e={};for(var n in t){var a=n.substring(O.length);a=a[0].toLowerCase()+a.slice(1),e[a]=t[n]}return w.set(e)},A=function(){T.playing=!0,console.log("PLAYING STATUS")},I=function(){T.playing=!1,console.log("STOP STATUS")},D=function(t){var e;e=t.message?t.message:t,console.log(e)},k=function(){setTimeout((function(){j(T.settings)}),2e3)};k(),R(D,A,I)},"72c5":function(t,e,n){"use strict";var a=n("6973"),i=n.n(a);i.a},"74b2":function(t,e,n){},"83ca":function(t,e,n){},"85ec":function(t,e,n){},"86e1":function(t,e,n){},9619:function(t,e,n){},a273:function(t,e,n){"use strict";var a=n("5284"),i=n.n(a);i.a},a4cc:function(t,e,n){},ad80:function(t,e,n){},c07e:function(t,e,n){"use strict";var a=n("74b2"),i=n.n(a);i.a},d229:function(t,e,n){},d242:function(t,e,n){"use strict";var a=n("ad80"),i=n.n(a);i.a},debf:function(t,e,n){},ebed:function(t,e,n){"use strict";var a=n("f56b"),i=n.n(a);i.a},f56b:function(t,e,n){}});
//# sourceMappingURL=app.25c60a3c.js.map