(function(e){function t(t){for(var i,s,r=t[0],c=t[1],l=t[2],u=0,f=[];u<r.length;u++)s=r[u],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&f.push(a[s][0]),a[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);d&&d(t);while(f.length)f.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],i=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(i=!1)}i&&(o.splice(t--,1),e=r(r.s=n[0]))}return e}var i={},a={app:0},o=[];function s(e){return r.p+"js/"+({about:"about"}[e]||e)+"."+{about:"f9e8f2e7"}[e]+".js"}function r(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.e=function(e){var t=[],n=a[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise((function(t,i){n=a[e]=[t,i]}));t.push(n[2]=i);var o,c=document.createElement("script");c.charset="utf-8",c.timeout=120,r.nc&&c.setAttribute("nonce",r.nc),c.src=s(e);var l=new Error;o=function(t){c.onerror=c.onload=null,clearTimeout(u);var n=a[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+i+": "+o+")",l.name="ChunkLoadError",l.type=i,l.request=o,n[1](l)}a[e]=void 0}};var u=setTimeout((function(){o({type:"timeout",target:c})}),12e4);c.onerror=c.onload=o,document.head.appendChild(c)}return Promise.all(t)},r.m=e,r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/WebApp/",r.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var d=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var i=n("85ec"),a=n.n(i);a.a},"0685":function(e,t,n){"use strict";var i=n("f412"),a=n.n(i);a.a},"0f88":function(e,t,n){"use strict";var i=n("c21e"),a=n.n(i);a.a},1072:function(e,t,n){},"1cb3":function(e,t,n){"use strict";var i=n("1072"),a=n.n(i);a.a},2046:function(e,t,n){"use strict";var i=n("5617"),a=n.n(i);a.a},"3aea":function(e,t,n){},"44d9":function(e,t,n){"use strict";var i=n("eadd"),a=n.n(i);a.a},"49cd":function(e,t,n){"use strict";var i=n("3aea"),a=n.n(i);a.a},"4a2f":function(e,t,n){"use strict";var i=n("856c"),a=n.n(i);a.a},"4d68":function(e,t,n){},"4dac":function(e,t,n){"use strict";var i=n("5d3c"),a=n.n(i);a.a},"54b9":function(e,t,n){},5617:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app"},[n("router-view"),n("div",{staticClass:"snack_contents"},[n("v-snackbar",{attrs:{"multi-line":e.multiLine,absolute:"","auto-height":"",timeout:e.timeout},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.text)+" ")])],1)],1)},o=[],s=n("9767"),r="EVENT_UPDATE_LIST",c="EVENT_SELECT_TOP_TAP",l="EVENT_SELECT_BOTTOM_TAP",u="EVENT_PUBLISH_WEBRTC",d="EVENT_PLAY_WEBRTC",f="EVENT_SHOW_SNACKBAR",v="EVENT_SET_VIDEO_LIST",m="EVENT_SET_AUDIO_LIST",p="EVENT_SET_CAMERA_ID",_="EVENT_SET_VIDEO_ID",h=new i["a"],g={data:function(){return{multiLine:!1,snackbar:!1,text:"",timeout:3e3}},created:function(){var e=this;s["b"](),h.$on(f,(function(t){e.snackbar=!0,e.text=t}))},methods:{showError:function(){this.snackbar=!0}}},b=g,E=(n("034f"),n("2877")),C=n("6544"),S=n.n(C),T=n("2db4"),R=Object(E["a"])(b,a,o,!1,null,null,null),w=R.exports;S()(R,{VSnackbar:T["a"]});var y=n("9483");Object(y["a"])("".concat("/WebApp/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});n("d3b7");var O=n("8c4f"),I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"root"},[n("v-container",{attrs:{fluid:""}},[n("h1",[e._v("CMS")]),n("v-row",[n("v-col",{attrs:{cols:"2"}},[n("v-subheader",[e._v("HLS URL :")])],1),n("v-col",{attrs:{cols:"8"}},[n("v-text-field",{attrs:{label:"URL"},model:{value:e.hls_url,callback:function(t){e.hls_url=t},expression:"hls_url"}})],1),n("v-col",{attrs:{cols:"2"}},[n("v-btn",{attrs:{icon:"",outlined:""},on:{click:e.updateHlsUrl}},[n("v-icon",[e._v("mdi-pencil")])],1),n("v-btn",{staticClass:"ml-4",attrs:{icon:"",outlined:""},on:{click:e.updateMessages}},[n("v-icon",[e._v("mdi-refresh")])],1)],1)],1),n("v-row",[n("v-col",[n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.computed_messages,"items-per-page":20,"sort-by":["time"],"sort-desc":[!0]}})],1)],1)],1)],1)},x=[],A=(n("4160"),n("159b"),n("5530")),P=n("2f62"),D=n("59ca"),j=(n("66ce"),{apiKey:"AIzaSyBtnFzSNMp30pWM2CNva-U9ZM1sdE8lzts",authDomain:"fir-ca8ad.firebaseapp.com",databaseURL:"https://fir-ca8ad.firebaseio.com",projectId:"fir-ca8ad",storageBucket:"fir-ca8ad.appspot.com",messagingSenderId:"371247898053",appId:"1:371247898053:web:a657c9fb4898a89947bfac",measurementId:"G-BWCDY22QJR"});function B(){return D["database"]().ref("/messages").orderByChild("time").once("value")}function N(e){return D["database"]().ref("/messages").orderByChild("time").limitToLast(e).once("value")}function M(e){return D["database"]().ref("/messages").orderByChild("time").startAt(e+1).once("value")}function k(e,t){var n=D["database"]().ref("/"+e).child("data").push().key,i="/"+n,a={};return a[e+"/"+i]=Object(A["a"])({},t),D["database"]().ref().update(a,(function(e){return e}))}function W(){return D["database"]().ref("/").once("value").then((function(e){var t=e.val()&&e.val().hls_url||"";return t}))}function L(e,t){var n={};return n[e]=t,D["database"]().ref().update(n,(function(e){return e}))}D["initializeApp"](j);var U={data:function(){return{hls_url:"",computed_messages:[],headers:[{text:"Time",align:"end",sortable:!0,value:"date",width:250},{text:"Type",value:"type",sortable:!1,width:120},{text:"User",value:"user",sortable:!1,width:120},{text:"Message",value:"message",sortable:!1}]}},computed:Object(A["a"])({},Object(P["c"])(["getHlsUrl"])),created:function(){var e=this;this.LOAD_HLS_URL().then((function(){e.hls_url=e.getHlsUrl})),this.updateMessages()},methods:Object(A["a"])(Object(A["a"])({},Object(P["b"])(["LOAD_HLS_URL"])),{},{updateHlsUrl:function(){L("hls_url",this.hls_url)},updateMessages:function(){var e=this;this.computed_messages=[],B().then((function(t){t.forEach((function(t){var n=t.val(),i=new Date(n.time).toLocaleString("ko-KR"),a=Object(A["a"])(Object(A["a"])({},n),{},{date:i});e.computed_messages.push(a)}))}))}})},V=U,$=(n("f42a"),n("8336")),z=n("62ad"),H=n("a523"),F=n("8fea"),G=n("132d"),J=n("0fd9"),Y=n("e0c7"),Z=n("8654"),q=Object(E["a"])(V,I,x,!1,null,"1854b89a",null),K=q.exports;S()(q,{VBtn:$["a"],VCol:z["a"],VContainer:H["a"],VDataTable:F["a"],VIcon:G["a"],VRow:J["a"],VSubheader:Y["a"],VTextField:Z["a"]});var Q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"contents_area",style:e.contents_style,attrs:{id:"root"}},[n("div",{staticClass:"count"},[e._v(e._s(e.h_count))]),e._l(e.obj,(function(t,i){return n(t.component,{key:i,ref:i,refInFor:!0,tag:"component",staticClass:"emoji_item",attrs:{props_data:t.emoji},on:{end_anim:e.deleteItem}})})),n("VideoView"),n("MenuBar",{staticClass:"menu"}),n("Tabs",{staticClass:"item"})],2)},X=[],ee=(n("25f0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"area",style:{height:e.v_heith}},[n("v-tabs",{staticClass:"tab_menu",attrs:{"background-color":"primary",dark:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(this.video_items,(function(t){return n("v-tab",{key:t.tab},[e._v(" "+e._s(t)+" ")])})),1),n("v-tabs-items",{attrs:{id:"tab_contents"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(this.video_items,(function(t){return n("v-tab-item",{key:t},[n("div",{staticClass:"tabs",style:{height:e.height}},["HLS"===t?n("HLSVideo"):"RECIVER"===t?n("WebRTCReceiver"):"SENDER"===t?n("WebRTCSender"):e._e()],1)])})),1)],1)}),te=[],ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"test"},[n("video",{staticClass:"video-js vjs-default-skin vjs-16-9",attrs:{id:"hls-example",controls:""}},[n("source",{ref:"video_source",attrs:{type:"application/x-mpegURL"}})])])},ie=[],ae={data:function(){return{window_width:100,window_height:50}},computed:Object(A["a"])({},Object(P["c"])(["getHlsUrl"])),props:["props_tab"],created:function(){var e=this;this.$store.dispatch("LOAD_HLS_URL").then((function(){e.$refs.video_source.setAttribute("src",e.getHlsUrl),window.videojs("hls-example")}))},methods:{playVideo:function(){}}},oe=ae,se=(n("6be5"),Object(E["a"])(oe,ne,ie,!1,null,null,null)),re=se.exports,ce=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"root",style:{height:e.v_height}},[i("video",{attrs:{autoplay:"",playsinline:"",muted:"",controls:"",id:"wowza-receiver",type:"module",src:n("9bce")},domProps:{muted:!0}})])},le=[],ue=n("9bce"),de={data:function(){return{v_height:"0px"}},created:function(){var e=9*window.innerWidth/16;this.v_height=e+"px";var t=function(e){h.$emit(f,e)},n=function(){console.log("### onHide")};this.$nextTick((function(){ue["initialize"](t,n)})),h.$on(d,(function(){console.log("PLAY")}))}},fe=de,ve=(n("1cb3"),Object(E["a"])(fe,ce,le,!1,null,"1dc2d895",null)),me=ve.exports,pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"root",style:{height:e.v_height}},[n("video",{attrs:{id:"wowza-sender",autoplay:"",playsinline:"",muted:"",controls:""},domProps:{muted:!0}})])},_e=[],he=(n("b0c0"),n("ac1f"),n("5319"),n("1276"),n("d81d"),n("b680"),n("3ca3"),n("498a"),n("ddb0"),n("2b3d"),n("53ca")),ge=(n("96cf"),n("1da1")),be=n("bd5a"),Ee=(n("a9e3"),void 0),Ce=void 0,Se=void 0,Te=void 0,Re=void 0,we=void 0,ye={videoBitrate:"",audioBitrate:"",videoFrameRate:"30",videoCodec:"42e01f",audioCodec:"opus"},Oe=void 0,Ie=void 0,xe=void 0,Ae=void 0,Pe={iceServers:[]};Pe=null;var De=void 0,je=void 0;function Be(e){console.log("WowzaPeerConnectionPublish.gotDescription: SDP:");var t=new Object;null!=ye.audioBitrate&&(t.audioBitrate=ye.audioBitrate),null!=ye.videoBitrate&&(t.videoBitrate=ye.videoBitrate),null!=ye.videoFrameRate&&(t.videoFrameRate=ye.videoFrameRate),null!=ye.videoCodec&&(t.videoCodec=ye.videoCodec),null!=ye.audioCodec&&(t.audioCodec=ye.audioCodec),null!=Ee&&(e.sdp=Ee(e.sdp,t)),console.log("WowzaPeerConnectionPublish.gotDescription: Setting local description SDP: "),Ae.setLocalDescription(e).then((function(){return xe.send('{"direction":"publish", "command":"sendOffer", "streamInfo":'+JSON.stringify(we)+', "sdp":'+JSON.stringify(e)+', "userData":'+JSON.stringify(Oe)+"}")})).catch((function(e){var t=Object(A["a"])({message:"Peer connection failed"},e);Ve(t)}))}function Ne(e){return function(){null!=Ae&&Ae.getStats(null).then(e,(function(e){return console.log(e)}))}}function Me(e){try{xe=new WebSocket(e)}catch(t){return void Ve(t)}xe.binaryType="arraybuffer",xe.onopen=function(){console.log("WowzaPeerConnectionPublish.wsConnection.onopen"),Ae=new RTCPeerConnection(Pe),De=void 0,je=void 0,Ae.onicecandidate=function(e){null!=e.candidate&&console.log("WowzaPeerConnectionPublish.gotIceCandidate: "+{ice:e.candidate})},Ae.onconnectionstatechange=function(e){null!=Ce&&Ce(e)},Ae.onnegotiationneeded=function(){Ae.createOffer(Be,Ve)};var e=Re.getTracks();for(var t in e){var n=Ae.addTrack(e[t],Re);"audio"===e[t].type?je=n:"video"===e[t].type&&(De=n)}},xe.onmessage=function(e){var t=JSON.parse(e.data),n=Number(t["status"]);if(200!=n)Le(),Ve({message:t["statusDescription"]});else{var i=t["sdp"];if(void 0!==i){var a=new Object;void 0!==ye.audioBitrate&&(a.audioBitrate=ye.audioBitrate),void 0!==ye.videoBitrate&&(a.videoBitrate=ye.videoBitrate),console.log("WowzaPeerConnectionPublish.wsConnection.onmessage: Setting remote description SDP:"),Ae.setRemoteDescription(new RTCSessionDescription(i),(function(){}),Ve)}var o=t["iceCandidates"];if(void 0!==o)for(var s in o)console.log("WowzaPeerConnectionPublish.wsConnection.iceCandidates: "+o[s]),Ae.addIceCandidate(new RTCIceCandidate(o[s]))}},xe.onclose=function(){console.log("WowzaPeerConnectionPublish.wsConnection.onclose")},xe.onerror=function(t){console.log("wsConnection.onerror"),console.log(t);var n="Websocket connection failed: "+e;console.log(n);var i=Object(A["a"])({message:n},t);Le(),Ve(i)}}function ke(e,t){null!=Ae&&(console.log(Ae),"audio"===e?null!=je?je.replaceTrack(t):je=Ae.addTrack(t):"video"===e&&(null!=De?De.replaceTrack(t):De=Ae.addTrack(t)))}function We(e){var t=e.wsURL;Re=e.localStream,null!=e.streamInfo&&(we=e.streamInfo),null!=e.mediaInfo&&(ye=e.mediaInfo),null!=e.userData&&(Oe=e.userData),null!=e.mungeSDP&&(Ee=e.mungeSDP),null!=e.onconnectionstatechange&&(Ce=e.onconnectionstatechange),null!=e.onstop&&(Se=e.onstop),null!=e.onerror&&(Te=e.onerror),null!=e.onstats&&(Ie=setInterval(Ne(e.onstats),5e3)),null==Ae?(null!=xe&&xe.close(),xe=null,console.log("WowzaPeerConnectionPublish.start: wsURL:"+t+" streamInfo:"+JSON.stringify(we)),Me(t)):console.log("WowzaPeerConnectionPublish.start: peerConnection already in use, not starting")}function Le(){null!=Ae&&Ae.close(),Ae=void 0,De=void 0,je=void 0,null!=xe&&xe.close(),xe=void 0,null!=Ie&&(clearInterval(Ie),Ie=void 0),null!=Se&&Se()}function Ue(){return null!=Ae}function Ve(e){console.trace(),null!=Te&&Te(e)}var $e={connect:Me,start:We,stop:Le,isStarted:Ue,replaceTrack:ke};function ze(e){this.context=e,this.instant=0,this.slow=0,this.clip=0,this.script=e.createScriptProcessor(2048,1,1);var t=this;this.script.onaudioprocess=function(e){var n,i=e.inputBuffer.getChannelData(0),a=0,o=0;for(n=0;n<i.length;++n)a+=i[n]*i[n],Math.abs(i[n])>.99&&(o+=1);t.instant=Math.sqrt(a/i.length),t.slow=.95*t.slow+.05*t.instant,t.clip=o/i.length}}ze.prototype.connectToSource=function(e,t){try{this.mic=this.context.createMediaStreamSource(e),this.mic.connect(this.script),this.script.connect(this.context.destination),"undefined"!==typeof t&&t(null)}catch(n){console.error(n),"undefined"!==typeof t&&t(n)}},ze.prototype.stop=function(){this.mic.disconnect(),this.script.disconnect()};var He=ze;window.AudioContext=window.AudioContext||window.webkitAudioContext||!1;var Fe={ready:!1,connectionState:"stopped",videoElementPublish:void 0,stream:void 0,isScreenSharing:!1,constraints:{video:{width:{min:"640",ideal:"1280",max:"1920"},height:{min:"360",ideal:"720",max:"1080"},frameRate:"30"},audio:!0},sdpURL:"",streamInfo:{applicationName:"",streamName:"",sessionId:"[empty]"},mediaInfo:{videoBitrate:"",audioBitrate:"",videoFrameRate:"30",videoCodec:"VP8",audioCodec:"opus"},userData:{param1:"value1"},audioEnabled:!0,videoEnabled:!0,useSoundMeter:!1,cameras:[],microphones:[]},Ge=void 0,Je=void 0,Ye={},Ze=function(e){return new Promise((function(t){Fe=Object(A["a"])(Object(A["a"])({},Fe),e),null!=Ye.onStateChanged&&Ye.onStateChanged(Fe),t(Fe)}))},qe=function(){return Fe},Ke=function(e){Ye=e},Qe=function(){var e=Object(ge["a"])(regeneratorRuntime.mark((function e(t){var n,i,a,o,s,r,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("WowzaWebRTC.set"),console.log(t),n=qe(),i=Object(A["a"])({},n.streamInfo),a=Object(A["a"])({},n.mediaInfo),o={},s=!1,null!=t.videoElementPublish&&(o["videoElementPublish"]=t.videoElementPublish),null!=t.useSoundMeter&&(o["useSoundMeter"]=t.useSoundMeter),null!=t.sdpURL&&(o["sdpURL"]=t.sdpURL.trim()),null!=t.applicationName&&(i["applicationName"]=t.applicationName.trim()),null!=t.streamName&&(i["streamName"]=t.streamName.trim()),null!=t.sessionId&&(i["sessionId"]=t.sessionId),null!=t.streamInfo&&(i=Object(A["a"])(Object(A["a"])({},i),t.streamInfo)),o["streamInfo"]=i,null!=t.videoBitrate&&(a.videoBitrate=t.videoBitrate),null!=t.audioBitrate&&(a.audioBitrate=t.audioBitrate),null!=t.videoFrameRate&&(a.videoFrameRate=t.videoFrameRate,o["constraints"]=Object(A["a"])({},n.constraints),"boolean"!==typeof o["constraints"]["video"]&&(""===a.videoFrameRate?delete o["constraints"]["video"]["frameRate"]:o["constraints"]["video"]["frameRate"]=t.videoFrameRate)),null!=t.videoCodec&&(a.videoCodec=t.videoCodec),null!=t.audioCodec&&(a.audioCodec=t.audioCodec),null!=t.mediaInfo&&(a=Object(A["a"])(Object(A["a"])({},a),t.streamInfo)),o["mediaInfo"]=a,null!=t.userData&&(o["userData"]=Object(A["a"])({},t.userData)),null!=t.constraints&&(o["constraints"]=t.constraints),null!=o.constraints&&JSON.stringify(n.constraints)!==JSON.stringify(o.constraints)&&(s=!0),e.prev=25,e.next=28,Ze(o);case 28:if(r=e.sent,null!=r.stream){e.next=32;break}return e.next=32,et();case 32:return e.next=34,tt();case 34:if(c=e.sent,!s||null==c.stream){e.next=38;break}return e.next=38,Xe(c.stream,c.constraints);case 38:return e.abrupt("return",qe());case 41:return e.prev=41,e.t0=e["catch"](25),ft(e.t0),e.abrupt("return",null);case 45:case"end":return e.stop()}}),e,null,[[25,41]])})));return function(t){return e.apply(this,arguments)}}(),Xe=function(e,t){var n=[],i=e.getAudioTracks(),a=e.getVideoTracks();for(var o in i)n.push(i[o].applyConstraints(t["audio"]));for(var s in a)n.push(a[s].applyConstraints(t["video"]));return Promise.all(n)},et=function(e){return e=e||"both",new Promise((function(t,n){console.log("WowzaWebRTCPublish.getUserMedia");var i=qe(),a=[],o=[];function s(e){return r.apply(this,arguments)}function r(){return r=Object(ge["a"])(regeneratorRuntime.mark((function n(s){var r,c,l,u,d,f,v,m;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("audio"===e&&o.length>0){for(c in r=s.getVideoTracks(),r)s.removeTrack(r[c]);s.addTrack(o[0])}else if("video"===e&&a.length>0){for(u in l=s.getAudioTracks(),l)s.removeTrack(l[u]);s.addTrack(a[0])}if(d={stream:s},"audio"!==e&&i.isScreenSharing){for(f in o)o[f].stop();d["isScreenSharing"]=!1}try{i.videoElementPublish.srcObject=s,d["ready"]=!0}catch(p){console.log("getUserMediaSuccess: error connecting stream to videoElementPublish, trying createObjectURL"),console.log(p),i.videoElementPublish.src=window.URL.createObjectURL(s),d["ready"]=!0}try{"video"!==e&&window.AudioContext&&i.useSoundMeter&&(v=new AudioContext,m=new He(v),m.connectToSource(s,(function(e){e?console.log(e):Je=setInterval((function(){var e=qe().audioEnabled?m.instant.toFixed(2):0;null!=Ye.onSoundMeter&&Ye.onSoundMeter(e)}),200)})))}catch(_){console.log("getUserMediaSuccess: error creating audio meter"),console.log(_)}return n.next=7,Ze(d);case 7:t(d);case 8:case"end":return n.stop()}}),n)}))),r.apply(this,arguments)}null!=i.stream&&(a=i.stream.getAudioTracks(),o=i.stream.getVideoTracks()),"video"!==e&&(null!=Ge&&Ge.stop(),null!=Je&&clearInterval(Je)),null==i.videoElementPublish&&n({message:"videoElementPublish not set"}),navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(i.constraints).then(s).catch(ft):navigator.getUserMedia?navigator.getUserMedia(i.constraints,s,(function(e){ft(e),n(e)})):(ft({message:"Your browser does not support WebRTC"}),n())}))},tt=function(){return new Promise((function(e,t){console.log("WowzaWebRTCPublish.getDevices"),navigator.mediaDevices.enumerateDevices().then((function(t){for(var n=Object(A["a"])({},qe().constraints),i=[],a=[],o=0;o<t.length;o++)"videoinput"===t[o].kind?(0===i.length&&(n.video=Object.assign({},n.video,{deviceId:t[o].deviceId})),i.push(t[o])):"audioinput"===t[o].kind&&(0===a.length&&(n.audio=Object.assign({},n.audio,{deviceId:t[o].deviceId})),a.push(t[o]));var s={cameras:i,microphones:a,constraints:n};e(Ze(s))})).catch((function(e){console.log("unable to detect AV devices: "+e),t(e)}))}))};function nt(e){null!=e.target&&null!=e.target.connectionState&&Ze({connectionState:e.target.connectionState})}function it(){Ze({connectionState:"stopped"})}function at(e,t){var n=qe();null!=n.stream&&null!=n.stream.getTracks&&n.stream.getTracks().map((function(n){n.kind===e&&(n.enabled=t)}))}function ot(e){console.log("WowzaWebRTC.setAudioEnabled:"+e),at("audio",e),Ze({audioEnabled:e})}function st(e){console.log("WowzaWebRTC.setVideoEnabled:"+e),at("video",e),Ze({videoEnabled:e})}function rt(){return new Promise((function(e,t){var n=qe().stream;function i(i){var a={stream:i,isScreenSharing:!0};n.getAudioTracks().length>0&&i.addTrack(n.getAudioTracks()[0]);try{qe().videoElementPublish.srcObject=i,a["ready"]=!0}catch(o){t(o)}Ze(a),e(i)}var a={video:!0};navigator.getDisplayMedia?navigator.getDisplayMedia(a).then((function(e){i(e,a)})).catch((function(e){t(e)})):navigator.mediaDevices.getDisplayMedia?navigator.mediaDevices.getDisplayMedia(a).then((function(e){i(e,a)})).catch((function(e){t(e)})):(a={video:{mediaSource:"screen"}},navigator.mediaDevices.getUserMedia(a).then((function(e){i(e,a)})).catch((function(e){t(e)})))}))}var ct=function e(t){if(console.log("WowzaWebRTC.setCamera: "+t),"screen"===t)rt().then((function(t){var n=qe();at("audio",n.audioEnabled),at("video",n.videoEnabled),t.getVideoTracks()[0].onended=function(){var t=qe();t.cameras.length>0&&e(t.cameras[0].deviceId)},$e.isStarted()&&(dt(),ut()),null!=Ye.onCameraChanged&&Ye.onCameraChanged("screen")}));else{var n=Object(A["a"])({},Fe.constraints);"boolean"===typeof n.video&&(n.video={}),n.video=Object.assign({},n.video,{deviceId:t}),Ze({constraints:n}).then((function(){et("video").then((function(){var e=qe();at("audio",e.audioEnabled),at("video",e.videoEnabled),$e.isStarted()&&(dt(),ut()),null!=Ye.onCameraChanged&&Ye.onCameraChanged(t)}))}))}},lt=function(e){console.log("WowzaWebRTC.setMicrophone: "+e);var t=Object(A["a"])({},Fe.constraints);"boolean"===typeof t.audio&&(t.audio={}),t.audio=Object.assign({},t.audio,{deviceId:e}),Ze({constraints:t}).then((function(){et("audio").then((function(){var t=qe();at("audio",t.audioEnabled),at("video",t.videoEnabled),$e.isStarted()&&(dt(),ut()),null!=Ye.onMicrophoneChanged&&Ye.onMicrophoneChanged(e)}))}))},ut=function(){var e=qe();console.log("WowzaWebRTC.start()"),$e.start({wsURL:e.sdpURL,localStream:e.stream,streamInfo:e.streamInfo,mediaInfo:e.mediaInfo,userData:e.userData,mungeSDP:be["b"],onconnectionstatechange:nt,onstop:it,onstats:Ye.onStats||void 0,onerror:ft})},dt=function(){console.log("WowzaWebRTC.stop()"),$e.stop()},ft=function(e){console.log("WowzaWebRTC ERROR:"),console.log(e),null==e.message&&null!=e.target&&console.log("typeof error.target: "+Object(he["a"])(e.target)),null!=Ye.onError&&Ye.onError(e)},vt={on:Ke,set:Qe,getState:qe,start:ut,stop:dt,setAudioEnabled:ot,setVideoEnabled:st,setCamera:ct,setMicrophone:lt},mt=vt,pt=n("d093");window.WowzaWebRTCPublish=mt;var _t=pt["a"].browserDetails;function ht(){return{sdpURL:"wss://".concat(s["c"](s["a"].STR_WEB_RTC_URL),".streamlock.net/webrtc-session.json"),applicationName:"live",streamName:s["c"](s["a"].STR_WEB_RTC_SENDER_STREAM),audioBitrate:s["c"](s["a"].STR_WEB_RTC_AUDIO_BITRATE),audioCodec:"opus",videoBitrate:s["c"](s["a"].STR_WEB_RTC_VIDEO_BITRATE),videoCodec:"VP8",videoFrameRate:s["c"](s["a"].STR_WEB_RTC_FRMAE_RATE),frameSize:s["c"](s["a"].STR_WEB_RTC_FRAME_SIZE)}}var gt=null,bt=null,Et={publishing:!1,pendingPublish:!1,pendingPublishTimeout:void 0,muted:!1,video:!0,selectedCam:"",selectedMic:"",settings:ht()},Ct=function(e,t,n,i,a){kt(),mt.on({onStateChanged:function(i){console.log("WowzaWebRTCPublish.onStateChanged"),"connected"===i.connectionState?e():"failed"===i.connectionState?t():n()},onCameraChanged:function(e){e!==Et.selectedCam&&(Et.selectedCam=e)},onMicrophoneChanged:function(e){e!==Et.selectedMic&&(Et.selectedMic=e)},onError:i,onSoundMeter:a}),mt.set({videoElementPublish:document.getElementById("wowza-sender"),useSoundMeter:!1}).then((function(e){h.$emit(v,e.cameras),h.$emit(m,e.microphones);var t=e.cameras[0].deviceId.replace("CameraMobile_","");mt.setCamera(t),Et.selectedCam=t}))},St=function(){if(""===Et.settings.sdpURL)throw"No stream configured.";if(""===Et.settings.applicationName)throw"Missing application name.";if(""===Et.settings.streamName)throw"Missing stream name.";return!0},Tt=function(e){var t=JSON.parse(JSON.stringify(mt.getState().constraints));"default"===e?(t.video["width"]={min:"640",ideal:"1280",max:"1920"},t.video["height"]={min:"360",ideal:"720",max:"1080"}):(t.video["width"]={exact:e[0]},t.video["height"]={exact:e[1]}),mt.set({constraints:t})},Rt=function(e){return Et.settings=e,mt.set(e)},wt=function(){St()&&mt.start()},yt=function(){mt.stop()},Ot=function(){mt.setVideoEnabled(!0)},It=function(){mt.setAudioEnabled(!1)},xt=function(e){var t;"OverconstrainedError"==e.name?(console.log("OverconstrainedError"),Tt("default")):t=e.message?e.message:e,Dt(t),yt()},At=function e(t){t?(console.log("Publish Disable"),Et.pendingPublish=!0,Et.pendingPublishTimeout=setTimeout((function(){yt(),xt({message:"Publish failed. Unable to connect."}),e(!1)}),1e4)):(Et.pendingPublish=!1,null!=Et.pendingPublishTimeout&&(clearTimeout(Et.pendingPublishTimeout),Et.pendingPublishTimeout=void 0))},Pt=function(){return Rt(Et.settings)},Dt=function(e){console.log("showErrorPanel",e),gt(e)},jt=function(){console.log("hideErrorPanel"),bt()},Bt=function(){Et.publishing=!0,At(!1),jt(),console.log("onPublishPeerConnected")},Nt=function(){At(!1),Bt(),xt({message:"Peer connection failed."}),console.log("onPublishPeerConnectionFailed")},Mt=function(){Et.pendingPublish||(Et.publishing=!1,console.log("onPublishPeerConnectionStopped"))},kt=function(){Ot(),It(),h.$on(p,(function(e){mt.setCamera(e),Et.selectedCam=e}))},Wt=function(e,t){gt=e,bt=t;var n=function(){var e=Et.settings;null!=e.frameSize&&""!==e.frameSize&&"default"!==e.frameSize&&Tt(e.frameSize.split("x")),"safari"===_t.browser&&console.log("Safari don't support VP9")};n(),Ct(Bt,Nt,Mt,xt)};function Lt(){yt(),h.$emit(p,Et.selectedCam);try{jt(),console.log("PPPPPublish"),Et.settings=ht(),Pt().then((function(){At(!0),wt()}))}catch(e){xt(e)}}var Ut={data:function(){return{v_height:"0px"}},created:function(){var e=9*window.innerWidth/16;this.v_height=e+"px";var t=function(e){h.$emit(f,e)},n=function(){console.log("### onHide")};this.$nextTick((function(){console.log("Sender Created"),Wt(t,n)})),h.$on(u,(function(){console.log("RECEIVE PUBLISH")}))}},Vt=Ut,$t=(n("5731"),Object(E["a"])(Vt,pe,_e,!1,null,"5a3ed012",null)),zt=$t.exports,Ht={data:function(){return{tabs:["HLS","WEBRTC"],height:"0px",v_heith:"0px",tab:0}},computed:Object(A["a"])({},Object(P["e"])(["video_items"])),components:{HLSVideo:re,WebRTCReceiver:me,WebRTCSender:zt},props:["props_tab"],created:function(){var e=this;this.$nextTick((function(){var t=9*window.innerWidth/16;e.v_heith=t+"px";var n=e.$refs.area.getBoundingClientRect().height;e.height=n+"px",e.SET_TAB_CONTENS_HEIGHT(n)})),h.$on(_,(function(t){e.tab=t}))},watch:{tab:function(){h.$emit(c,this.tab)}},methods:Object(A["a"])({},Object(P["d"])(["SET_TAB_CONTENS_HEIGHT"]))},Ft=Ht,Gt=(n("49cd"),n("71a3")),Jt=n("c671"),Yt=n("fe57"),Zt=n("aac8"),qt=Object(E["a"])(Ft,ee,te,!1,null,"363d9642",null),Kt=qt.exports;S()(qt,{VTab:Gt["a"],VTabItem:Jt["a"],VTabs:Yt["a"],VTabsItems:Zt["a"]});var Qt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"root"},[n("div",{staticClass:"shadow"},[n("tab-indicator",{attrs:{props_event_type:this.EVENT_SELECT_TOP_TAP,props_tab_length:this.video_items.length}}),n("div",{staticClass:"horizontal_line"},[n("p",{staticClass:"font"},[e._v("I M FINE Web App")]),n("div",{staticClass:"ver"},[e._v(e._s(this.app_version))])]),n("tab-indicator",{attrs:{props_event_type:this.EVENT_SELECT_BOTTOM_TAP,props_tab_length:this.tab_items.length}})],1)])},Xt=[],en=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"indicator_bg"},e._l(this.props_tab_length,(function(t){return n("div",{key:t},[n("span",{staticClass:"dot",class:e.getDotClass(t)})])})),0)},tn=[],nn={props:["props_event_type","props_tab_length"],data:function(){return{selected_index:0}},computed:{},created:function(){var e=this;h.$on(this.props_event_type,(function(t){e.selected_index=t}))},methods:{getDotClass:function(e){return e-1===this.selected_index?"selected":"unselected"}}},an=nn,on=(n("0685"),Object(E["a"])(an,en,tn,!1,null,"0142a645",null)),sn=on.exports,rn={data:function(){return{EVENT_SELECT_BOTTOM_TAP:l,EVENT_SELECT_TOP_TAP:c,app_version:0}},components:{TabIndicator:sn},computed:Object(A["a"])({},Object(P["e"])(["tab_items","video_items"])),created:function(){this.app_version="81"}},cn=rn,ln=(n("4dac"),Object(E["a"])(cn,Qt,Xt,!1,null,"38d9e526",null)),un=ln.exports,dn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"area"},[n("v-tabs",{staticClass:"tab_menu",attrs:{"background-color":"primary",dark:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(this.tab_items,(function(t){return n("v-tab",{key:t.tab},[e._v(" "+e._s(t)+" ")])})),1),n("v-tabs-items",{attrs:{id:"tab_contents"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(this.tab_items,(function(t){return n("v-tab-item",{key:t},[n("div",{staticClass:"tabs",style:{height:e.height}},["Chatting"===t?n("Chatting"):"Emoji"===t?n("Emoji"):"Info"===t?n("Info"):e._e(),n("div")],1)])})),1)],1)},fn=[],vn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"bg",staticClass:"root"},[n("div",{staticClass:"title"},[e._v("User Name")]),n("form",{staticClass:"horizontal_line"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.user_name,expression:"user_name"}],staticClass:"edit",staticStyle:{flex:"7"},attrs:{type:"text"},domProps:{value:e.user_name},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.applyName(t)},input:function(t){t.target.composing||(e.user_name=t.target.value)}}}),n("div",{staticClass:"divider",staticStyle:{flex:"1"}},[e._v(":")]),n("v-btn",{staticStyle:{flex:"2"},on:{click:e.applyName}},[e._v("APPLY")])],1),n("div",{staticClass:"title"},[e._v("Web RTC")]),n("div",{staticClass:"horizontal_line"},[n("div",{staticClass:"left_option"},[e._v("Signaling URL")]),n("div",{staticClass:"divider",staticStyle:{flex:"0.1"}},[e._v(":")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.web_signaliing_url,expression:"web_signaliing_url"}],staticClass:"edit right_option",attrs:{type:"text"},domProps:{value:e.web_signaliing_url},on:{input:function(t){t.target.composing||(e.web_signaliing_url=t.target.value)}}})]),n("div",{staticClass:"title",staticStyle:{flex:"1"}},[e._v("Receiver")]),n("div",{staticClass:"horizontal_line"},[n("div",{staticClass:"left_option"},[e._v("Stream Name")]),n("div",{staticClass:"divider",staticStyle:{flex:"0.1"}},[e._v(":")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.receive_stream,expression:"receive_stream"}],staticClass:"edit right_option",attrs:{type:"text"},domProps:{value:e.receive_stream},on:{input:function(t){t.target.composing||(e.receive_stream=t.target.value)}}})]),n("div",{staticClass:"horizontal_line"},[n("v-btn",{staticStyle:{flex:"1","margin-top":"20px"},on:{click:e.showVideo}},[e._v("PLAY")])],1),n("div",{staticClass:"title",staticStyle:{flex:"1"}},[e._v("Sender")]),n("div",{staticClass:"horizontal_line"},[n("div",{staticClass:"left_option"},[e._v("Stream Name")]),n("div",{staticClass:"divider",staticStyle:{flex:"0.1"}},[e._v(":")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.sender_stream,expression:"sender_stream"}],staticClass:"edit right_option",attrs:{type:"text"},domProps:{value:e.sender_stream},on:{input:function(t){t.target.composing||(e.sender_stream=t.target.value)}}})]),n("div",{staticClass:"horizontal_line"},[n("div",{staticClass:"left_option"},[e._v("Video Bitrate")]),n("div",{staticClass:"divider",staticStyle:{flex:"0.1"}},[e._v(":")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.video_bitrate,expression:"video_bitrate"}],staticClass:"edit right_option",attrs:{type:"text"},domProps:{value:e.video_bitrate},on:{input:function(t){t.target.composing||(e.video_bitrate=t.target.value)}}})]),n("div",{staticClass:"horizontal_line"},[n("div",{staticClass:"left_option"},[e._v("Video Source")]),n("div",{staticClass:"divider",staticStyle:{flex:"0.1"}},[e._v(":")]),n("select",{ref:"cam_select",staticClass:"edit right_option",attrs:{id:"camera-list-select",type:"text"},on:{change:e.changeCam}},e._l(e.video_list,(function(t){return n("option",{key:t.index,domProps:{value:t.deviceId}},[e._v(e._s(t.label))])})),0)]),n("div",{staticClass:"horizontal_line"},[n("div",{staticClass:"left_option"},[e._v("Audio Bitrate")]),n("div",{staticClass:"divider",staticStyle:{flex:"0.1"}},[e._v(":")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.audio_bitrate,expression:"audio_bitrate"}],staticClass:"edit right_option",attrs:{type:"text"},domProps:{value:e.audio_bitrate},on:{input:function(t){t.target.composing||(e.audio_bitrate=t.target.value)}}})]),n("div",{staticClass:"horizontal_line"},[n("div",{staticClass:"left_option"},[e._v("Audio Source")]),n("div",{staticClass:"divider",staticStyle:{flex:"0.1"}},[e._v(":")]),n("select",{ref:"mic_select",staticClass:"edit right_option",attrs:{id:"mic-list-select",type:"text"},on:{change:e.changeMic}},e._l(e.mic_list,(function(t){return n("option",{key:t.index,domProps:{value:t.label}},[e._v(e._s(t.label))])})),0)]),n("div",{staticClass:"horizontal_line"},[n("div",{staticClass:"left_option"},[e._v("Frame Size")]),n("div",{staticClass:"divider",staticStyle:{flex:"0.1"}},[e._v(":")]),n("select",{ref:"select_size",staticClass:"edit right_option"},[n("option",{attrs:{value:"default",selected:""}},[e._v("default")]),n("option",{attrs:{value:"640x360"}},[e._v("640x360")]),n("option",{attrs:{value:"1280x720"}},[e._v("1280x720")]),n("option",{attrs:{value:"1920x1080"}},[e._v("1920x1080")])])]),n("div",{staticClass:"horizontal_line"},[n("div",{staticClass:"left_option"},[e._v("Frame Rate")]),n("div",{staticClass:"divider",staticStyle:{flex:"0.1"}},[e._v(":")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.frame_rate,expression:"frame_rate"}],staticClass:"edit right_option",attrs:{type:"text"},domProps:{value:e.frame_rate},on:{input:function(t){t.target.composing||(e.frame_rate=t.target.value)}}})]),n("div",{staticClass:"horizontal_line"},[n("v-btn",{staticStyle:{flex:"1","margin-top":"20px"},attrs:{id:"publish_btn"},on:{click:e.recordVideo}},[e._v("PUBLISH")])],1),n("div",{staticStyle:{width:"100%",height:"40px"}})])},mn=[],pn={data:function(){return{user_name:"",web_signaliing_url:"",receive_stream:"",sender_stream:"",video_list:[],mic_list:[],audio_bitrate:"",video_bitrate:"",frame_size_index:0,frame_rate:""}},computed:Object(A["a"])({},Object(P["e"])(["tab_contents_height"])),created:function(){var e=this;this.$nextTick((function(){e.$refs.bg.style.height=e.tab_contents_height+"px",console.log(e.tab_contents_height)})),h.$on(v,(function(t){console.log("RECEIVE",t),e.video_list=t})),h.$on(m,(function(t){e.mic_list=t})),this.loadInfo()},methods:Object(A["a"])(Object(A["a"])({},Object(P["d"])(["SET_NAME"])),{},{applyName:function(){s["d"](s["a"].STR_USER_NAME,this.user_name),this.SET_NAME(this.user_name)},loadInfo:function(){this.user_name=s["c"](s["a"].STR_USER_NAME),this.web_signaliing_url=s["c"](s["a"].STR_WEB_RTC_URL),this.receive_stream=s["c"](s["a"].STR_WEB_RTC_RECEIVE_STREAM),this.sender_stream=s["c"](s["a"].STR_WEB_RTC_SENDER_STREAM),this.audio_bitrate=s["c"](s["a"].STR_WEB_RTC_AUDIO_BITRATE),this.video_bitrate=s["c"](s["a"].STR_WEB_RTC_VIDEO_BITRATE),this.frame_size=s["c"](s["a"].STR_WEB_RTC_FRAME_SIZE),this.frame_rate=s["c"](s["a"].STR_WEB_RTC_FRMAE_RATE)},changeCam:function(){console.log("changeCam"),console.log(this.$refs.cam_select.selectedIndex);var e=this.video_list[this.$refs.cam_select.selectedIndex];h.$emit(p,e.deviceId)},changeMic:function(){console.log("mic"),console.log(this.$refs.mic_select.selectedIndex)},applyReceiverOption:function(){s["d"](s["a"].STR_WEB_RTC_URL,this.web_signaliing_url),s["d"](s["a"].STR_WEB_RTC_RECEIVE_STREAM,this.receive_stream)},applySenderOption:function(){s["d"](s["a"].STR_WEB_RTC_URL,this.web_signaliing_url),s["d"](s["a"].STR_WEB_RTC_SENDER_STREAM,this.sender_stream),s["d"](s["a"].STR_WEB_RTC_VIDEO_BITRATE,this.video_bitrate),s["d"](s["a"].STR_WEB_RTC_AUDIO_BITRATE,this.audio_bitrate),this.select_size=this.$refs.select_size.selectedIndex;var e=this.$refs.select_size.options[this.select_size].value;console.log(e),s["d"](s["a"].STR_WEB_RTC_FRAME_SIZE,e),s["d"](s["a"].STR_WEB_RTC_FRMAE_RATE,this.frame_rate)},showVideo:function(){h.$emit(_,1),this.applyReceiverOption(),Object(ue["playVideo"])()},recordVideo:function(){h.$emit(_,0),this.applySenderOption(),Lt()}})},_n=pn,hn=(n("2046"),Object(E["a"])(_n,vn,mn,!1,null,"7e8ee980",null)),gn=hn.exports;S()(hn,{VBtn:$["a"]});var bn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"bg"},[n("div",{ref:"items",staticClass:"itmes"},[n("div",{ref:"glist",staticClass:"grid"},[n("v-row",e._l(e.emoji_list,(function(t){return n("v-col",{key:t,attrs:{cols:"4"}},[n("v-img",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"shadow",attrs:{"aspect-ratio":"1"},on:{click:function(n){return e.addHeart(t)}}},[n("div",{staticClass:"font"},[e._v(e._s(t))])])],1)})),1)],1)])])},En=[],Cn={data:function(){return{imgs:[],timer:null}},computed:Object(A["a"])({},Object(P["e"])(["tab_contents_height","emoji_list"])),created:function(){var e=this;this.$nextTick((function(){e.$refs.bg.style.height=e.tab_contents_height+"px",e.$refs.items.style.height=e.tab_contents_height+"px";var t=e.$refs.glist,n=window.innerHeight-t.getBoundingClientRect().y;t.style.height=n+"px",console.log(e.tab_contents_height)}))},methods:Object(A["a"])(Object(A["a"])({},Object(P["b"])(["ADD_EMOJI"])),{},{addHeart:function(e){this.ADD_EMOJI(e)}})},Sn=Cn,Tn=(n("4a2f"),n("adda")),Rn=n("269a"),wn=n.n(Rn),yn=n("5607"),On=Object(E["a"])(Sn,bn,En,!1,null,"3fbf420e",null),In=On.exports;S()(On,{VCol:z["a"],VImg:Tn["a"],VRow:J["a"]}),wn()(On,{Ripple:yn["a"]});var xn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"bg",staticClass:"tab_bg"},[n("ChattingList",{staticClass:"list"}),n("div",{staticClass:"shadow_up"}),n("ChattingInput",{staticClass:"input"})],1)},An=[],Pn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"outline"},[n("form",{staticClass:"form"},[n("input",{staticClass:"text_input",attrs:{type:"text"},domProps:{value:e.input_data},on:{input:e.updataInput,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendMessage(t)}}})]),n("v-btn",{ref:"btn",class:{send_btn:1==this.isEdit,wait_btn:0==this.isEdit},style:1==this.isEdit&&{color:"white"},attrs:{icon:""},on:{click:e.sendMessage}},[n("v-icon",[e._v("mdi-arrow-up")])],1)],1)},Dn=[],jn={data:function(){return{input_data:"",isEdit:!1}},methods:{sendMessage:function(){var e=this;if(this.input_data){var t=this.input_data;this.$store.dispatch("SEND_MESSAGE",t).then((function(t){console.log("RR = ",t),t||(e.input_data="",e.isEdit=!1,h.$emit(r))}))}},getBtnClass:function(){return 1==this.$refs.input.value?"send_btn":"wait_btn"},updataInput:function(e){this.input_data=e.target.value,this.isEdit=this.input_data.length>0}}},Bn=jn,Nn=(n("dda2"),Object(E["a"])(Bn,Pn,Dn,!1,null,"4461e05c",null)),Mn=Nn.exports;S()(Nn,{VBtn:$["a"],VIcon:G["a"]});var kn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"root"},[n("ul",{ref:"rlist",staticClass:"chatting_list"},e._l(e.getMessages,(function(t){return n("li",{key:t.index},[n("div",{class:!!t.isMine&&e.msg_right},[n("div",{staticClass:"msg_item",class:t.isMine?e.msg_mine:e.msg_other},[n("div",{staticClass:"msg_top"},[n("div",{staticClass:"msg_user"},[e._v(" "+e._s(t.user)+" ")]),n("div",{staticClass:"msg_time"},[e._v(" "+e._s(e.getFormatDate(t.time))+" ")])]),n("div",{staticClass:"msg_contents"},[e._v(" "+e._s(t.message)+" ")])])])])})),0)])},Wn=[],Ln={data:function(){return{msg_right:"msg_right",msg_mine:"msg_mine",msg_other:"msg_other"}},computed:Object(A["a"])({},Object(P["c"])(["getMessages"])),created:function(){var e=this;h.$on(r,(function(){e.scrollToBottom()})),this.$nextTick((function(){var t=e.$refs.rlist,n=window.innerHeight-t.getBoundingClientRect().y-50;t.style.height=n+"px"}))},mounted:function(){var e=this;this.$nextTick((function(){e.scrollToBottom()}))},watch:{getMessages:function(){console.log("add item"),this.$nextTick((function(){this.scrollToBottom()}))}},methods:{getFormatDate:function(e){var t=new Date(e);return t.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})},scrollToBottom:function(){var e=this.$refs.rlist;e.scrollTop=e.scrollHeight}}},Un=Ln,Vn=(n("71a8"),Object(E["a"])(Un,kn,Wn,!1,null,"ed287208",null)),$n=Vn.exports,zn={computed:Object(A["a"])({},Object(P["e"])(["tab_contents_height"])),components:{ChattingInput:Mn,ChattingList:$n},created:function(){var e=this;this.$nextTick((function(){e.$refs.bg.style.height=e.tab_contents_height+"px"}))}},Hn=zn,Fn=(n("44d9"),Object(E["a"])(Hn,xn,An,!1,null,"4b74a416",null)),Gn=Fn.exports,Jn={data:function(){return{height:"0px",tab:0}},computed:Object(A["a"])({},Object(P["e"])(["tab_items"])),components:{Info:gn,Chatting:Gn,Emoji:In},created:function(){var e=this;this.$nextTick((function(){var t=e.$refs.area.getBoundingClientRect().height;e.height=t+"px",e.SET_TAB_CONTENS_HEIGHT(t)}))},watch:{tab:function(){h.$emit(l,this.tab),console.log("Tab Chaged",this.tab)}},methods:Object(A["a"])({},Object(P["d"])(["SET_TAB_CONTENS_HEIGHT"]))},Yn=Jn,Zn=(n("c4aa"),Object(E["a"])(Yn,dn,fn,!1,null,"16ad8182",null)),qn=Zn.exports;S()(Zn,{VTab:Gt["a"],VTabItem:Jt["a"],VTabs:Yt["a"],VTabsItems:Zt["a"]});var Kn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"root"},[n("div",{staticClass:"icon",class:{anim:this.isAnim},style:{left:e.getLeft,transition:"all "+e.getDuration+"s linear"},attrs:{id:"hid"}},[e._v(" "+e._s(e.props_data)+" ")])])},Qn=[],Xn={data:function(){return{isAnim:!1,getLeft:"0px",getDuration:0}},props:["props_data"],mounted:function(){var e=this,t=.8,n=3,i=this.getRandom(t,n);this.getDuration=i;var a=Math.floor(this.getRandom(50,window.innerWidth-50))+"px";this.getLeft=a;var o=setTimeout((function(){clearTimeout(o),e.$emit("end_anim",e.$vnode.data.ref)}),1e3*i),s=setTimeout((function(){e.isAnim=!0,clearTimeout(s)}),10)},methods:{getRandom:function(e,t){return Math.random()*(t-e)+e}}},ei=Xn,ti=(n("d0df"),Object(E["a"])(ei,Kn,Qn,!1,null,"13f1cf06",null)),ni=ti.exports,ii={name:"App",components:{VideoView:Kt,MenuBar:un,Tabs:qn,EmojiIcon:ni},data:function(){return{h_count:0,obj:{},contents_style:{height:document.documentElement.clientHeight+"px"}}},created:function(){var e=this;h.$on("RECIEVE_DATA",(function(t){e.obj["idx"+e.h_count]={component:ni,emoji:t.message},e.h_count++})),this.loadName(),this.loadMessage()},beforeDestroy:function(){this.DELETE_MESSAGE_EVENT()},methods:Object(A["a"])(Object(A["a"])(Object(A["a"])({},Object(P["d"])(["SET_NAME","DELETE_MESSAGE_EVENT"])),Object(P["b"])(["LOAD_MESSAGES","SET_MESSAGE_EVENT"])),{},{getEmoji:function(e){this.emoji_list[e]},deleteItem:function(e){this.$delete(this.obj,e)},loadName:function(){var e=s["c"](s["a"].STR_USER_NAME);0==e.length&&(e=Math.random().toString(36).substring(7)),this.SET_NAME(e)},loadMessage:function(){var e=this;this.LOAD_MESSAGES().then((function(){console.log("load all messsage"),e.SET_MESSAGE_EVENT()}))}})},ai=ii,oi=(n("0f88"),Object(E["a"])(ai,Q,X,!1,null,"5f79a69f",null)),si=oi.exports;i["a"].use(O["a"]);var ri=[{path:"/",redirect:"/client"},{path:"/client",name:"Client",component:si},{path:"/cms",name:"CMS",component:K},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}}],ci=new O["a"]({routes:ri}),li=ci;n("99af"),n("c975");i["a"].use(P["a"]);var ui,di=100,fi=new P["a"].Store({state:{dic_list:[],video_items:["SENDER","RECIVER","HLS"],tab_items:["Info","Chatting","Emoji"],hrl_url:"",last_timestamp:0,messages:[],user_name:"",emoji_list:["ðŸ˜","ðŸ¥³","âœŒðŸ»","ðŸ˜º","ðŸ¤¡","ðŸ‘ðŸ»","ðŸ’‹","â­ï¸","ðŸŒ¹"],tab_contents_height:0},getters:{getMessages:function(e){return e.messages},getHlsUrl:function(e){return e.hrl_url}},mutations:{SET_TAB_CONTENS_HEIGHT:function(e,t){e.tab_contents_height=t},ADD_MESSAGES:function(e,t){e.messages.length>=di&&e.messages.shift(),e.messages=e.messages.concat(t)},SET_NAME:function(e,t){e.user_name=t},SET_HLS_URL:function(e,t){e.hrl_url=t},DELETE_MESSAGE_EVENT:function(){clearTimeout(ui),ui=null}},actions:{LOAD_MESSAGES:function(e){var t=e.state,n=e.commit;return N(di).then((function(e){var i=[];return e.forEach((function(e){t.dic_list.push(e.key);var n=e.val();t.last_timestamp=n.time;var a=n.type||"MESSAGE";if("MESSAGE"===a){o&&(n.isMine=!0),n.index=e.key;var o=n.user===t.user_name;i.push(n)}})),n("ADD_MESSAGES",i),e}))},SET_MESSAGE_EVENT:function(e){var t=e.state,n=e.commit;ui=setInterval(Object(ge["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:M(t.last_timestamp).then((function(e){var i=null,a=[];e.forEach((function(e){var n=e.val();i=n;var o=-1!=t.dic_list.indexOf(e.key);if(!o){var s=n.type||"MESSAGE";if("MESSAGE"===s){n.index=e.key;var r=n.user===t.user_name;r||a.push(e.val())}else h.$emit("RECIEVE_DATA",e.val());t.dic_list.push(e.key)}})),a.length>0&&(n("ADD_MESSAGES",a),1==i&&(t.last_timestamp=i.time))}));case 1:case"end":return e.stop()}}),e)}))),1e3)},SEND_MESSAGE:function(e,t){var n=e.commit,i=e.state,a={type:"MESSAGE",user:i.user_name,time:(new Date).getTime(),message:t};k("messages",a).then((function(e){return console.log("SEND_RESULT",e),e||n("ADD_MESSAGES",Object(A["a"])(Object(A["a"])({},a),{},{isMine:!0})),e}))},LOAD_HLS_URL:function(e){return Object(ge["a"])(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,W();case 3:i=t.sent,n("SET_HLS_URL",i);case 5:case"end":return t.stop()}}),t)})))()},ADD_EMOJI:function(e,t){var n=e.state,i={type:"EMOJI",user:n.user_name,time:(new Date).getTime(),message:t};k("messages",i).then((function(e){return console.log("SEND_EMOJI_RESULT",e),e}))}},modules:{}}),vi=n("f309");i["a"].use(vi["a"]);var mi=new vi["a"]({});i["a"].config.productionTip=!1,new i["a"]({router:li,store:fi,vuetify:mi,render:function(e){return e(w)}}).$mount("#app")},5731:function(e,t,n){"use strict";var i=n("fbe8"),a=n.n(i);a.a},"5a6c":function(e,t,n){},"5d3c":function(e,t,n){},"6be5":function(e,t,n){"use strict";var i=n("d229"),a=n.n(i);a.a},"71a8":function(e,t,n){"use strict";var i=n("8434"),a=n.n(i);a.a},8434:function(e,t,n){},"856c":function(e,t,n){},"85ec":function(e,t,n){},9767:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return h})),n.d(t,"d",(function(){return g})),n.d(t,"c",(function(){return b}));var i=n("ade3"),a=n("5530"),o={},s="IMFINE_SD_STORAGE",r="STR_USER_NAME",c="STR_WEB_RTC_URL",l="STR_WEB_RTC_RECEIVE_STREAM",u="STR_WEB_RTC_SENDER_STREAM",d="STR_WEB_RTC_VIDEO_BITRATE",f="STR_WEB_RTC_AUDIO_BITRATE",v="STR_WEB_RTC_FRAME_SIZE",m="STR_WEB_RTC_FRMAE_RATE",p={STR_USER_NAME:r,STR_WEB_RTC_URL:c,STR_WEB_RTC_RECEIVE_STREAM:l,STR_WEB_RTC_SENDER_STREAM:u,STR_WEB_RTC_VIDEO_BITRATE:d,STR_WEB_RTC_AUDIO_BITRATE:f,STR_WEB_RTC_FRAME_SIZE:v,STR_WEB_RTC_FRMAE_RATE:m},_={STR_USER_NAME:"",STR_WEB_RTC_URL:"5f852799e11d1",STR_WEB_RTC_RECEIVE_STREAM:"",STR_WEB_RTC_SENDER_STREAM:"",STR_WEB_RTC_VIDEO_BITRATE:"2000",STR_WEB_RTC_AUDIO_BITRATE:"64",STR_WEB_RTC_FRAME_SIZE:"default",STR_WEB_RTC_FRMAE_RATE:"30"};function h(){console.log("SD CONFIG START");var e=localStorage.getItem(s);o=JSON.parse(e)}function g(e,t){o=Object(a["a"])(Object(a["a"])({},o),{},Object(i["a"])({},e,t)),localStorage.setItem(s,JSON.stringify(o))}function b(e){var t=o;return t&&t[e]?t[e]:_[e]}},"9bce":function(e,t,n){"use strict";n.r(t),n.d(t,"initialize",(function(){return D})),n.d(t,"playVideo",(function(){return j}));n("fb6a"),n("d3b7"),n("498a");var i=n("53ca"),a=n("5530"),o=n("bd5a"),s=(n("a9e3"),n("3ca3"),n("ddb0"),n("2b3d"),n("d4ec")),r=n("bee2"),c=function(){function e(t){Object(s["a"])(this,e),this.mungeSDP=void 0,this.onconnectionstatechange=void 0,this.onstop=void 0,this.onerror=void 0,this.videoElement=void 0,this.sdpURL="",this.repeaterRetryCount=0,this.streamInfo=void 0,this.userData=void 0,this.wsConnection=void 0,this.peerConnection=void 0,this.peerConnectionConfig={iceServers:[]},this.gotIceCandidate=this.gotIceCandidate.bind(this),this.gotDescription=this.gotDescription.bind(this),this.gotRemoteTrack=this.gotRemoteTrack.bind(this),this.doGetAvailableStreams=!1,this.getAvailableStreamsResolve=void 0,this.getAvailableStreamsReject=void 0,t&&this.set(t)}return Object(r["a"])(e,[{key:"set",value:function(e){null!=e.sdpURL&&(this.sdpURL=e.sdpURL),null!=e.videoElement&&(this.videoElement=e.videoElement),null!=e.streamInfo&&(this.streamInfo=e.streamInfo),null!=e.userData&&(this.userData=e.userData),null!=e.mungeSDP&&(this.mungeSDP=e.mungeSDP),null!=e.onconnectionstatechange&&(this.onconnectionstatechange=e.onconnectionstatechange),null!=e.onstop&&(this.onstop=e.onstop),null!=e.onerror&&(this.onerror=e.onerror)}},{key:"gotIceCandidate",value:function(e){null!=e.candidate&&console.log("gotIceCandidate: "+JSON.stringify({ice:e.candidate}))}},{key:"gotDescription",value:function(e){var t=this;console.log("WowzaPeerConnectionPlay.gotDescription"),this.peerConnection.setLocalDescription(e).then((function(){console.log("sendAnswer"),t.wsConnection.send('{"direction":"play", "command":"sendResponse", "streamInfo":'+JSON.stringify(t.streamInfo)+', "sdp":'+JSON.stringify(e)+', "userData":'+JSON.stringify(t.userData)+"}")})).catch((function(e){return console.log("set description error",e)}))}},{key:"gotRemoteTrack",value:function(e){console.log("WowzaPeerConnectionPlay.gotRemoteTrack: kind:"+e.track.kind+" stream:"+e.streams[0]),console.log(e.streams);try{this.videoElement.srcObject=e.streams[0],console.log("TRY")}catch(t){console.log("EEEEE",t),this.videoElement.src=window.URL.createObjectURL(e.streams[0])}}},{key:"wsConnect",value:function(e){var t=this;console.log("WowzaPeerConnectionPlaywsConnect: "+e);try{this.wsConnection=new WebSocket(e)}catch(a){return void this.errorHandler(a)}function n(){t.wsConnection.send('{"direction":"play", "command":"getOffer", "streamInfo":'+JSON.stringify(t.streamInfo)+', "userData":'+JSON.stringify(t.userData)+"}")}function i(){t.wsConnection.send('{"direction":"play", "command":"getAvailableStreams", "streamInfo":'+JSON.stringify(t.streamInfo)+', "userData":'+JSON.stringify(t.userData)+"}")}this.wsConnection.binaryType="arraybuffer",this.wsConnection.onopen=function(){console.log("WowzaPeerConnectionPlay.onopen"),t.peerConnection=new RTCPeerConnection(t.peerConnectionConfig),t.peerConnection.onicecandidate=t.gotIceCandidate,t.peerConnection.ontrack=t.gotRemoteTrack,t.peerConnection.onconnectionstatechange=function(e){null!=t.onconnectionstatechange&&t.onconnectionstatechange(e)},t.doGetAvailableStreams?i():n()},this.wsConnection.onmessage=function(e){var i=JSON.parse(e.data),a=Number(i["status"]),o=i["command"];if(514==a)t.repeaterRetryCount++,t.repeaterRetryCount<10?setTimeout(n,500):(t.errorHandler({message:"Live stream repeater timeout: "}),t.stop());else if(200!=a)t.errorHandler({message:i["statusDescription"]});else{var s=i["streamInfo"];void 0!==s&&(t.streamInfo.sessionId=s.sessionId);var r=i["sdp"];null!=r&&(console.log("sdp: "+JSON.stringify(i["sdp"])),null!=t.mungeSDP&&(i.sdp.sdp=t.mungeSDP(i.sdp.sdp)),console.log("SDP Data: "+i.sdp.sdp),t.peerConnection.setRemoteDescription(new RTCSessionDescription(i.sdp)).then((function(){return t.peerConnection.createAnswer().then((function(e){return t.gotDescription(e)})).catch((function(e){return t.errorHandler(e)}))})).catch((function(e){return t.errorHandler(e)})));var c=i["iceCandidates"];if(null!=c)for(var l in c)console.log("iceCandidates: "+JSON.stringify(c[l])),t.peerConnection.addIceCandidate(new RTCIceCandidate(c[l]))}0=="sendResponse".localeCompare(o)&&(null!=t.wsConnection&&t.wsConnection.close(),t.wsConnection=null),0=="getAvailableStreams".localeCompare(o)&&(t.stop(),t.getAvailableStreamsResolve(i))},this.wsConnection.onclose=function(){console.log("wsConnection.onclose")},this.wsConnection.onerror=function(e){t.errorHandler(e)}}},{key:"start",value:function(){console.log("STATRT"),this.repeaterRetryCount=0,this.doGetAvailableStreams=!1,null==this.peerConnection?(console.log("WowzaPeerConnectionPlay.start: sdpURL:"+this.sdpURL+" streamInfo:"+JSON.stringify(this.streamInfo)),this.wsConnect(this.sdpURL)):console.log("WowzaPeerConnectionPlay.start: peerConnection already in use, not starting")}},{key:"stop",value:function(){null!=this.peerConnection&&this.peerConnection.close(),this.peerConnection=null,null!=this.wsConnection&&this.wsConnection.close(),this.wsConnection=null,this.videoElement.src="",null!=this.onstop&&this.onstop()}},{key:"getAvailableStreams",value:function(){var e=this;return new Promise((function(t,n){e.getAvailableStreamsResolve=t,e.getAvailableStreamsReject=n,e.doGetAvailableStreams=!0,null==e.peerConnection?e.wsConnect(e.sdpURL):n({message:"WowzaPeerConnectionPlay.getAvailableStreams: peerConnection already in use"})}))}},{key:"errorHandler",value:function(e){null!=this.onerror&&this.onerror(e)}}]),e}(),l=c,u={connectionState:"stopped",videoElementPlay:void 0,sdpURL:"",streamInfo:{applicationName:"",streamName:"",sessionId:"[empty]"},userData:{param1:"value1"}},d=void 0,f={},v=function(e){return new Promise((function(t){u=Object(a["a"])(Object(a["a"])({},u),e),null!=f.onStateChanged&&f.onStateChanged(u),t(u)}))},m=function(){return u},p=function(e){null!=e.target&&null!=e.target.connectionState&&v({connectionState:e.target.connectionState})},_=function(){v({connectionState:"stopped"})},h=function(e){f=e},g=function(e){return new Promise((function(t){var n=m(),i=Object(a["a"])({},n.streamInfo),o={};null!=e.videoElementPlay&&(o["videoElementPlay"]=e.videoElementPlay),null!=e.sdpURL&&(o["sdpURL"]=e.sdpURL.trim()),null!=e.applicationName&&(i["applicationName"]=e.applicationName.trim()),null!=e.streamName&&(i["streamName"]=e.streamName.trim()),null!=e.sessionId&&(i["sessionId"]=e.sessionId),null!=e.streamInfo&&(i=Object(a["a"])(Object(a["a"])({},i),e.streamInfo)),o["streamInfo"]=i,null!=e.userData&&(o["userData"]=Object(a["a"])({},e.userData)),v(o).then((function(e){t(e)}))}))},b=function(){var e=m();return d=new l({sdpURL:e.sdpURL,videoElement:e.videoElementPlay,streamInfo:e.streamInfo,userData:e.userData,mungeSDP:o["a"],onconnectionstatechange:p,onstop:_,onerror:S}),d.getAvailableStreams()},E=function(){var e=m();d=new l({sdpURL:e.sdpURL,videoElement:e.videoElementPlay,streamInfo:e.streamInfo,userData:e.userData,mungeSDP:o["a"],onconnectionstatechange:p,onstop:_,onerror:S}),d.start()},C=function(){d.stop(),d=void 0},S=function(e){console.log("WowzaWebRTCPlay ERROR:"),console.log(e),null==e.message&&null!=e.target&&console.log("typeof error.target: "+Object(i["a"])(e.target)),null!=f.onError&&f.onError(e)},T={on:h,set:g,getState:m,getAvailableStreams:b,play:E,stop:C},R=T,w=n("9767");window.WowzaWebRTCPlay=R;var y={settings:I()},O="play";function I(){return{playApplicationName:"live",playSdpURL:"wss://".concat(w["c"](w["a"].STR_WEB_RTC_URL),".streamlock.net/webrtc-session.json"),playStreamName:w["c"](w["a"].STR_WEB_RTC_RECEIVE_STREAM)}}var x=function(e,t,n){R.on({onError:e,onStateChanged:function(e){"connected"===e.connectionState?t():n()}}),R.set({videoElementPlay:document.getElementById("wowza-receiver")})},A=function(e){P(e).then((function(){R.play()}))},P=function(e){y.settings=e;var t={};for(var n in e){var i=n.substring(O.length);i=i[0].toLowerCase()+i.slice(1),t[i]=e[n]}return R.set(t)};function D(e,t){var n=function(e){var t;t=e.message?e.message:e,i(t)},i=function(t){e(t)},a=function(){t()},o=function(){y.playing=!0,a(),console.log("PLAYING STATUS")},s=function(){y.playing=!1,console.log("STOP STATUS")};x(n,o,s)}function j(){y.settings=I(),A(y.settings)}},bd5a:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return _}));n("caad"),n("c975"),n("fb6a"),n("a9e3"),n("d3b7"),n("4d63"),n("ac1f"),n("25f0"),n("2532"),n("466d"),n("5319"),n("1276"),n("2ca0");var i,a,o,s,r,c=n("d093"),l=c["a"].browserDetails;function u(e,t){var n=e.split(/\r\n/),i="",a=!1;for(var o in n){var s=n[o];s.length<=0||(i+=s,i+="\r\n",0=="a=rtcp-mux".localeCompare(s)&&0==a&&(i+=t,a=!0))}return i}function d(e,t){var n=e.split(/\r\n/),i="",a=!1,o=!1,s=!1;for(var r in n){var c=n[r];c.length<=0||(c.includes("a=rtcp-rsize")&&(o=!0),c.includes("a=rtcp-mux")&&(s=!0,console.log(s)))}for(var l in n){var u=n[l];i+=u,i+="\r\n",0=="a=rtcp-rsize".localeCompare(u)&&0==a&&1==o&&(i+=t,a=!0),0=="a=rtcp-mux".localeCompare(u)&&1==a&&0==o&&(i+=t,a=!0),0=="a=rtcp-mux".localeCompare(u)&&0==a&&0==o&&(a=!0)}return i}function f(e,t){for(var n in i){var a=i[n];if(a.includes(e)){if(e.includes("VP9")||e.includes("VP8")){var o="",c=a.split(/\r\n/);for(var l in c){var u=c[l];o+=u,o+="\r\n"}return t.includes("audio")&&(r=n),t.includes("video")&&(s=n),o}return t.includes("audio")&&(r=n),t.includes("video")&&(s=n),a}}return""}function v(e){if(e.startsWith("a=rtpmap")||e.startsWith("a=rtcp-fb")||e.startsWith("a=fmtp")){var t=e.split(":");if(t.length>1){var n=t[1].split(" ");if(!isNaN(n[0])&&!n[1].startsWith("http")&&!n[1].startsWith("ur")){var a=i[n[0]];return a||(a=""),a+=e+"\r\n",i[n[0]]=a,!1}}}return!0}function m(e){var t=new RegExp("a=rtpmap:(\\d+) (\\w+)/(\\d+)"),n=e.match(t);return n&&n.length>=3?n:null}function p(e,t){i=new Object,a="42e01f",o="opus",s=-1,r=-1;var n=e.split(/\r\n/),c="header",p=!1,_="";for(var h in null!=t.videoCodec&&""!==t.videoCodec&&(a=t.videoCodec),null!=t.audioCodec&&""!==t.audioCodec&&(o=t.audioCodec),n){var g=n[h];if(!(g.length<=0)){var b=v(g);b&&(_+=g,_+="\r\n")}}for(var E in _=u(_,f(o,"audio")),_=d(_,f(a,"video")),e=_,n=e.split(/\r\n/),_="",n){var C=n[E];if(!(C.length<=0)){if("chrome"===l.browser){var S=void 0;if(0==C.indexOf("m=audio")&&-1!==r){S=C.split(" "),_+=S[0]+" "+S[1]+" "+S[2]+" "+r+"\r\n";continue}if(0==C.indexOf("m=video")&&-1!==s){S=C.split(" "),_+=S[0]+" "+S[1]+" "+S[2]+" "+s+"\r\n";continue}}if(_+=C,0===C.indexOf("m=audio")?(c="audio",p=!1):0===C.indexOf("m=video")?(c="video",p=!1):0==C.indexOf("a=rtpmap")&&(c="bandwidth",p=!1),"chrome"===l.browser&&(0===C.indexOf("a=mid:")||0==C.indexOf("a=rtpmap"))&&!p)if(0=="audio".localeCompare(c))void 0!==t.audioBitrate&&(_+="\r\nb=CT:"+t.audioBitrate,_+="\r\nb=AS:"+t.audioBitrate),p=!0;else if(0=="video".localeCompare(c))void 0!==t.videoBitrate&&(_+="\r\nb=CT:"+t.videoBitrate,_+="\r\nb=AS:"+t.videoBitrate,void 0!==t.videoFrameRate&&(_+="\r\na=framerate:"+t.videoFrameRate)),p=!0;else if(0=="bandwidth".localeCompare(c)){var T=void 0;if(T=m(C),null!==T){var R=T[2].toLowerCase();0!="vp9".localeCompare(R)&&0!="vp8".localeCompare(R)&&0!="h264".localeCompare(R)&&0!="red".localeCompare(R)&&0!="ulpfec".localeCompare(R)&&0!="rtx".localeCompare(R)||void 0!==t.videoBitrate&&(_+="\r\na=fmtp:"+T[1]+" x-google-min-bitrate="+t.videoBitrate+";x-google-max-bitrate="+t.videoBitrate),0!="opus".localeCompare(R)&&0!="isac".localeCompare(R)&&0!="g722".localeCompare(R)&&0!="pcmu".localeCompare(R)&&0!="pcma".localeCompare(R)&&0!="cn".localeCompare(R)||void 0!==t.audioBitrate&&(_+="\r\na=fmtp:"+T[1]+" x-google-min-bitrate="+t.audioBitrate+";x-google-max-bitrate="+t.audioBitrate)}}if(("firefox"===l.browser||"safari"===l.browser)&&0==C.indexOf("c=IN")){if(0=="audio".localeCompare(c)){""!==t.audioBitrate&&(_+="\r\nb=TIAS:"+1e3*Number(t.audioBitrate)+"\r\n",_+="b=AS:"+1e3*Number(t.audioBitrate)+"\r\n",_+="b=CT:"+1e3*Number(t.audioBitrate)+"\r\n");continue}if(0=="video".localeCompare(c)){""!==t.videoBitrate&&(_+="\r\nb=TIAS:"+1e3*Number(t.videoBitrate)+"\r\n",_+="b=AS:"+1e3*Number(t.videoBitrate)+"\r\n",_+="b=CT:"+1e3*Number(t.videoBitrate)+"\r\n");continue}}_+="\r\n"}}return _}function _(e){var t=e.split(/\r\n/),n="";for(var i in t){var a=t[i];if(0!=a.length){if(a.includes("profile-level-id")){var o=a.substr(a.indexOf("profile-level-id")+17,6),s=Number("0x"+o.substr(0,2)),r=Number("0x"+o.substr(2,2)),c=Number("0x"+o.substr(4,2));s>66&&(s=66,r=224,c=31);var l=("00"+s.toString(16)).slice(-2).toLowerCase()+("00"+r.toString(16)).slice(-2).toLowerCase()+("00"+c.toString(16)).slice(-2).toLowerCase();a=a.replace(o,l)}n+=a,n+="\r\n"}}return n}},c21e:function(e,t,n){},c4aa:function(e,t,n){"use strict";var i=n("54b9"),a=n.n(i);a.a},d0df:function(e,t,n){"use strict";var i=n("e97f"),a=n.n(i);a.a},d229:function(e,t,n){},dda2:function(e,t,n){"use strict";var i=n("4d68"),a=n.n(i);a.a},e97f:function(e,t,n){},eadd:function(e,t,n){},f412:function(e,t,n){},f42a:function(e,t,n){"use strict";var i=n("5a6c"),a=n.n(i);a.a},fbe8:function(e,t,n){}});
//# sourceMappingURL=app.aba545ad.js.map